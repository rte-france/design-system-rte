<div class="rte-tab-container" [attr.data-direction]="direction()">
  <div
    class="rte-tab-border-vertical"
    aria-hidden="true"
    role="presentation"
    [attr.data-direction]="direction()"
  ></div>
  <div
    [ngStyle]="{
      position: 'relative',
      display: 'flex',
      'align-items': 'center',
      'flex-direction': direction() === 'horizontal' ? 'row' : 'column',
    }"
  >
    <rte-icon-button
      *ngIf="isScrollable() && !shouldDisplayDropdown()"
      aria-label="Previous tabs"
      variant="transparent"
      size="l"
      [name]="
        direction() === 'horizontal' ? 'arrow-chevron-left' : 'arrow-chevron-up'
      "
      [ngStyle]="{
        'z-index': 11,
        opacity: canScrollBackward() ? '1' : '0',
        'pointer-events': canScrollBackward() ? 'auto' : 'none',
      }"
      (click)="scrollBackward()"
    />
    <div
      #tabList
      role="tablist"
      aria-label="Sample Tabs"
      class="rte-tab"
      [attr.data-alignment]="shouldDisplayDropdown() ? 'start' : alignment()"
      [attr.data-direction]="direction()"
      [attr.data-overflow-type]="overflowType()"
    >
      <span
        class="rte-tab-selected-indicator"
        [ngStyle]="tabItemSelectedIndicatorStyle()"
      ></span>
      <rte-dropdown
        *ngIf="shouldDisplayDropdown() && options().length > 0"
        #dropdown="rteDropdown"
        [autoclose]="true"
        [ariaLabel]="'Select tab'"
        [offset]="10"
      >
        <button
          class="rte-tab-dropdown-button"
          dropdownTrigger
          [attr.data-inverted]="inverted()"
          [attr.data-overflow-type]="overflowType()"
          (click)="dropdown.open()"
        >
          <rte-icon
            *ngIf="selectedTab()?.icon"
            appearance="filled"
            [name]="selectedTab()?.icon!"
          />
          {{ selectedTab()?.label || "Select tab" }}
          <rte-badge
            *ngIf="
              selectedTab()?.badgeCount &&
              selectedTab()?.badgeCount! > 0 &&
              selectedTab()?.badgeAppearance === 'text'
            "
            [badgeType]="selectedTab()?.badgeType!"
            [badgeAppearance]="selectedTab()?.badgeAppearance!"
            [count]="selectedTab()?.badgeCount"
            [simpleBadge]="true"
          />
          <rte-icon name="arrow-chevron-down" appearance="outlined" />
        </button>
        <rte-dropdown-item
          *ngFor="let option of dropdownFilteredOptions()"
          [label]="option?.label || ''"
          [leftIcon]="option.icon"
          (click)="onClickTabItem(option.id)"
        ></rte-dropdown-item>
      </rte-dropdown>
      <ng-container *ngFor="let option of options(); let idx = index">
        <rte-tab-item
          #tabItem
          [option]="option"
          [direction]="direction()"
          [compactSpacing]="compactSpacing()"
          [isSelected]="isSelected(option.id)"
          [inverted]="inverted()"
          [attr.data-hidden]="shouldDisplayDropdown()"
          [isHidden]="shouldDisplayDropdown()"
          (keydown)="onKeydownTabItem($event)"
          (click)="onClickTabItem(option.id)"
        ></rte-tab-item>
      </ng-container>
    </div>
    <rte-icon-button
      *ngIf="isScrollable() && !shouldDisplayDropdown()"
      aria-label="Next tabs"
      variant="transparent"
      size="l"
      [name]="
        direction() === 'horizontal'
          ? 'arrow-chevron-right'
          : 'arrow-chevron-down'
      "
      [ngStyle]="{
        'z-index': 11,
        opacity: canScrollForward() ? '1' : '0',
        'pointer-events': canScrollForward() ? 'auto' : 'none',
      }"
      (click)="scrollForward()"
    />
  </div>
  <div
    class="rte-tab-border-horizontal"
    aria-hidden="true"
    role="presentation"
    [attr.data-direction]="direction()"
    [attr.data-compact-spacing]="compactSpacing()"
    [attr.data-scrollable]="
      isScrollable() && overflowType() === 'scrollable' ? true : undefined
    "
  ></div>
</div>
