<nav
  class="breadcrumbs-container"
  role="navigation"
  [attr.aria-label]="ariaLabel()"
  [ngClass]="{ truncated: truncatedItems()?.truncated?.length }"
>
  @if (truncatedItems()?.truncated?.length) {
    <div class="breadcrumb-item">
      <rte-link
        [href]="truncatedItems()!.root.link"
        [label]="truncatedItems()!.root.label"
        [subtle]="true"
        [maxWidth]="breadcrumbItemMaxWidth()"
      />
    </div>
    <span aria-hidden="true" class="separator">/</span>
    <span class="breadcrumb-item" rteDropdown [rteDropdownOffset]="8">
      <rte-icon-button
        rteDropdownTrigger
        name="more-horiz"
        role="menu"
        variant="neutral"
        aria-label="More items"
        data-testid="show-more"
        dropdownTrigger
        tabindex="-1"
        [compactSpacing]="true"
      />
      <rte-dropdown-menu [items]="truncatedItems()?.truncated ?? []" />
    </span>
    <span aria-hidden="true" class="separator">/</span>
    @for (
      item of truncatedItems()!.remaining;
      track item.link;
      let i = $index
    ) {
      <div class="breadcrumb-item">
        @if (i === truncatedItems()!.remaining.length - 1) {
          <a
            role="link"
            aria-current="page"
            tabindex="0"
            [attr.aria-label]="item.label"
            [style]="'max-width:' + breadcrumbItemMaxWidth() + 'px'"
          >
            {{ item.label }}
          </a>
        } @else {
          <rte-link
            [href]="item.link"
            [label]="item.label"
            [subtle]="true"
            [maxWidth]="breadcrumbItemMaxWidth()"
          />
        }
      </div>
      @if (i < truncatedItems()!.remaining.length - 1) {
        <span aria-hidden="true" class="separator">/</span>
      }
    }
  } @else {
    @for (item of items(); track item.link; let i = $index) {
      <div class="breadcrumb-item">
        @if (i === items().length - 1) {
          <a
            role="link"
            aria-current="page"
            tabindex="0"
            [attr.aria-label]="item.label"
            [style]="'max-width:' + breadcrumbItemMaxWidth() + 'px'"
          >
            {{ item.label }}
          </a>
        } @else {
          <rte-link
            [href]="item.link"
            [label]="item.label"
            [subtle]="true"
            [maxWidth]="breadcrumbItemMaxWidth()"
          />
        }
      </div>
      @if (i < items().length - 1) {
        <span aria-hidden="true" class="separator">/</span>
      }
    }
  }
</nav>
