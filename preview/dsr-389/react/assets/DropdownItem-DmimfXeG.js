import{j as n}from"./jsx-runtime-Cf8x2fCZ.js";import{T as S,S as G,E as J,c as F,d as Q,b as X}from"./keyboard.constants-ep-ZHn_7.js";import{r as i}from"./index-G8LIXM5I.js";import{u as ae}from"./useActiveKeyboard-BPEscCvd.js";import{B as ge}from"./Badge-Cd3dEy6T.js";import{D as oe}from"./Divider-GNmPbxh0.js";import{I as W}from"./Icon-DjEid3Hw.js";import{c as ne,b as se,a as re}from"./auto-placement-C6RxYMtA.js";import{u as xe}from"./useAnimatedMount-_zPBpYOt.js";import{O as he}from"./Overlay-CtOPxSY4.js";import{c as Ee}from"./index-DSdvzt-y.js";let _={};const h={};class l{static generateId(){return`dropdown-${Math.random().toString(36).substring(2,9)}`}static isOpen(e){return _[e]||!1}static open(e){_[e]=!0,this.notifyListeners(e)}static close(e){delete _[e],this.notifyListeners(e)}static closeAll(){_={},Object.values(h).flat().forEach(e=>e())}static getOpenedDropdowns(){return Object.keys(_)}static getParentDropdownId(e){const t=e.split("-");return t.length<=2?null:(t.pop(),t.join("-"))}static closeSubMenus(e){Object.keys(_).filter(s=>s.startsWith(e)&&s!==e).forEach(s=>l.close(s))}static subscribe(e,t){return h[e]||(h[e]=[]),h[e].push(t),()=>{h[e]=h[e].filter(a=>a!==t)}}static notifyListeners(e){var t;(t=h[e])==null||t.forEach(a=>a())}}const Z=i.createContext(void 0),ie=({dropdownId:r,closeRoot:e,autoClose:t=!0,children:a})=>n.jsx(Z.Provider,{value:{dropdownId:r,closeRoot:e,autoClose:t},children:a});ie.__docgenInfo={description:"",methods:[],displayName:"DropdownContextProvider",props:{dropdownId:{required:!0,tsType:{name:"string"},description:""},autoClose:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},closeRoot:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const De="_trigger_1jrnr_29",Ie="_dropdown_1jrnr_41",B={trigger:De,dropdown:Ie,"dropdown-items":"_dropdown-items_1jrnr_67"},z=r=>{var a;const e=de(r),t=e.findIndex(s=>s===document.activeElement);t<e.length-1?e[t+1].focus():(a=e[0])==null||a.focus()},Re=r=>{var a;const e=de(r),t=e.findIndex(s=>s===document.activeElement);t>0?e[t-1].focus():(a=e[e.length-1])==null||a.focus()},ce=r=>{var a;const e=r?CSS.escape(r):null;if(!e)return;const t=document.querySelector(`[data-dropdown-id='${e}']`);t&&((a=(t==null?void 0:t.querySelectorAll('li[role="menuitem"]'))[0])==null||a.focus())},je=r=>{var s;const e=l.getParentDropdownId(r),t=e?CSS.escape(e):null;if(!t)return;const a=document.querySelector(`[data-dropdown-id='${t}']`);(s=a==null?void 0:a.querySelector("[data-active=true]"))==null||s.focus()},de=r=>{const e=r==null?void 0:r.querySelectorAll('li[role="menuitem"]');return e?Array.from(e):[]},le=r=>{const e=i.useRef(r||l.generateId()),[t,a]=i.useState(!1);i.useEffect(()=>l.subscribe(e.current,()=>{a(l.isOpen(e.current))}),[]);const s=()=>{l.open(e.current)},u=()=>{l.close(e.current)},v=()=>{t?u():s()};return{dropdownId:e.current,isOpen:t,open:s,close:u,toggle:v}},ue=i.forwardRef(({trigger:r,className:e,style:t,dropdownId:a,hasParent:s,position:u="bottom",autoClose:v=!0,isOpen:y=!1,onClose:D=()=>{},children:L,offset:g=0,alignment:T="start",...V},p)=>{const{dropdownId:I}=le(a),[m,A]=i.useState(u),{closeRoot:R}=i.useContext(Z)||{},j=i.useRef(null),C=i.useRef(null),[c,M]=i.useState(null),[K,N]=i.useState(null),[q,k]=i.useState({top:500,left:500}),{shouldRender:P,isAnimating:U}=xe(y,150),H=i.useCallback(o=>{C.current=o,M(o),typeof p=="function"?p(o):p&&(p.current=o)},[p]),d=i.useCallback(o=>{j.current=o,N(o)},[]),x=i.useCallback(()=>{s&&R?R():D(),l.closeAll()},[R,s,D]),pe=o=>{if(o.key===F||o.key===Q){if(o.stopPropagation(),o.preventDefault(),c===null)return;o.key===F?z(c):Re(c)}},me=o=>{o.key===X&&x()},fe=o=>{if(o.key===S){if(c===null)return;o.preventDefault(),z(c)}},we=o=>{if(o.key===S){if(c===null)return;o.preventDefault(),z(c)}},{onKeyDown:ye,onKeyUp:ve}=ae({onKeyUp:me,onKeyDown:pe},{interactiveKeyCodes:[G,J,S,F,Q,X]});i.useEffect(()=>{const o=f=>{var $;const w=f.target,O=document.querySelectorAll("[data-dropdown-id]");Array.from(O).some(Y=>Y.contains(w))||(($=j.current)==null?void 0:$.contains(w))||x()};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[x]);const ee=i.useCallback((o,f)=>{const w=ne(o,f,"right",g,!0),O=se(o,f,w),b=re(w,o,f,g,O);A(w),k(b)},[g]),te=i.useCallback((o,f,w,O)=>{const b=w==="auto"?ne(o,f,"bottom"):w,$=O??se(o,f,b),Y=re(b,o,f,g,$);A(b),k(Y)},[g]);return i.useEffect(()=>{!K||!c||(s?ee(K,c):te(K,c,u,T))},[s,c,K,u,T,ee,te]),i.useEffect(()=>{y&&c&&ce(I)},[y,I,c]),n.jsxs(ie,{dropdownId:I,closeRoot:x,autoClose:v,children:[n.jsx("div",{ref:d,className:B.trigger,tabIndex:-1,onKeyDown:fe,onKeyUp:we,children:r}),P&&n.jsx(he,{children:n.jsx("div",{className:Ee(B.dropdown,e),"data-dropdown-id":I,"data-position":m,"data-open":U||void 0,...V,style:{...t,top:q.top,left:q.left},ref:H,onKeyUp:ve,onKeyDown:ye,children:n.jsx("ul",{className:B["dropdown-items"],role:"menu",children:L})})})]})});ue.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{trigger:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},position:{defaultValue:{value:'"bottom"',computed:!1},required:!1},autoClose:{defaultValue:{value:"true",computed:!1},required:!1},isOpen:{defaultValue:{value:"false",computed:!1},required:!1},onClose:{defaultValue:{value:"() => {}",computed:!1},required:!1},offset:{defaultValue:{value:"0",computed:!1},required:!1},alignment:{defaultValue:{value:'"start"',computed:!1},required:!1}},composes:["CoreDropdownProps"]};const E={"dropdown-item":"_dropdown-item_nt3cr_29","dropdown-divider":"_dropdown-divider_nt3cr_66"},Ce=({label:r,link:e,leftIcon:t,trailingText:a,disabled:s,hasSeparator:u,hasIndent:v,children:y,badgeCount:D,badgeContent:L,badgeIcon:g,badgeType:T,showBadge:V,onClick:p,...I})=>{const{dropdownId:m,autoClose:A,closeRoot:R}=i.useContext(Z)||{},j=`${m}-${r&&r.replace(/\s+/g,"")}`,{isOpen:C,open:c}=le(j),M=()=>{m&&(l.closeSubMenus(m),c())},K=()=>{m&&l.closeSubMenus(m)};v&&t&&console.warn(`DropdownItem: 'hasIndent' prop is ignored when 'leftIcon' is provided : displaying icon '${t}' for dropdownitem with label '${r}' without indentation.`);const N=d=>{s||(p&&p(d),A&&R&&R())},q=d=>{if([G,J].includes(d.key))if(e){const x=d.currentTarget.querySelector("a");x&&x.click()}else{if(s)return;p&&N(d),y&&c()}},k=d=>{d.preventDefault(),d.key===S&&(C&&ce(j),d.shiftKey&&m&&je(m))},{onKeyUp:P,onFocus:U,onKeyDown:H}=ae({onKeyUp:k,onFocus:K,onKeyDown:q},{interactiveKeyCodes:[G,J,S,F,Q,X]});return y?n.jsx(ue,{hasParent:!0,dropdownId:j,isOpen:C,trigger:n.jsxs(n.Fragment,{children:[n.jsxs("li",{className:E["dropdown-item"],"data-active":C,"data-disabled":s,role:"menuitem",onMouseOver:M,onKeyUp:P,onKeyDown:H,onFocus:U,tabIndex:0,children:[v&&n.jsx("span",{style:{width:"20px"}}),t&&n.jsx(W,{name:t,className:E["dropdown-item-icon"],appearance:C?"filled":"outlined"}),e?n.jsx("a",{href:e,style:{flex:"2",textDecoration:"none",color:"inherit"},children:r}):n.jsx("span",{style:{flex:"2"},children:r}),n.jsx(W,{name:"arrow-chevron-right",className:E["dropdown-item-icon"]})]}),u&&n.jsx("div",{className:E["dropdown-divider"],children:n.jsx(oe,{})})]}),children:y}):n.jsxs(n.Fragment,{children:[n.jsxs("li",{className:E["dropdown-item"],"data-disabled":s,role:"menuitem",onClick:N,onMouseOver:M,onKeyUp:P,onKeyDown:H,onFocus:U,tabIndex:0,...I,children:[v&&!t&&n.jsx("span",{style:{width:"20px"}}),t&&n.jsx(W,{name:t,className:E["dropdown-item-icon"]}),e?n.jsx("a",{href:e,style:{flex:"2",textDecoration:"none",color:"inherit"},children:r}):n.jsx("span",{style:{flex:"2"},children:r}),a&&n.jsx("div",{children:a}),V&&D&&D>0&&L==="number"&&n.jsx(ge,{count:D,content:L,icon:g,badgeType:T})]}),u&&n.jsx("div",{className:E["dropdown-divider"],children:n.jsx(oe,{})})]})};Ce.__docgenInfo={description:"",methods:[],displayName:"DropdownItem",props:{onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.MouseEvent<HTMLLIElement> | React.KeyboardEvent<HTMLLIElement>) => void",signature:{arguments:[{type:{name:"union",raw:"React.MouseEvent<HTMLLIElement> | React.KeyboardEvent<HTMLLIElement>",elements:[{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLLIElement>",elements:[{name:"HTMLLIElement"}]},{name:"ReactKeyboardEvent",raw:"React.KeyboardEvent<HTMLLIElement>",elements:[{name:"HTMLLIElement"}]}]},name:"event"}],return:{name:"void"}}},description:""}},composes:["Omit"]};export{ue as D,Ce as a};
