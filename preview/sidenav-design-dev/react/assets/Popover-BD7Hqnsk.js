import{j as a}from"./jsx-runtime-Cf8x2fCZ.js";import{g as z,b as H,a as J,O as X}from"./Overlay-xE_sH5Kz.js";import{E as Z}from"./keyboard.constants-ep-ZHn_7.js";import{r as t}from"./index-G8LIXM5I.js";import{u as ee}from"./useAnimatedMount-_zPBpYOt.js";import{F as te}from"./dom.constants-pEgPeCLJ.js";import{B as R}from"./Button-B-hhLjRd.js";import{c as x}from"./index-DSdvzt-y.js";const N=8,S=20,oe=(e,...o)=>{t.useEffect(()=>{function r(l){if(o.length===0||o.some(i=>!i))return;o.some(i=>i.contains(l.target))||e()}return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[e,o])},re=e=>{t.useEffect(()=>{const o=r=>{r.key==="Escape"&&(r.preventDefault(),e())};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[e])},se=(e,o)=>{t.useEffect(()=>{if(!o||!e)return;const r=e.querySelectorAll(te);r.length>0&&r[0].focus();const l=n=>{if(n.key==="Tab"){const i=r[0],C=r[r.length-1];n.shiftKey&&document.activeElement===i?(n.preventDefault(),C.focus()):!n.shiftKey&&document.activeElement===C&&(n.preventDefault(),i.focus())}};return e.addEventListener("keydown",l),()=>e.removeEventListener("keydown",l)},[e,o])},ne=e=>{t.useEffect(()=>(window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("scroll",e,!0)}),[e])},ae="_popoverTrigger_50c8k_3",ie="_popover_50c8k_3",ce="_popoverInner_50c8k_26",ue="_popoverContentContainer_50c8k_34",pe="_popoverTitle_50c8k_41",le="_popoverContent_50c8k_34",de="_popoverButtonContainer_50c8k_65",p={popoverTrigger:ae,popover:ie,popoverInner:ce,popoverContentContainer:ue,popoverTitle:pe,popoverContent:le,popoverButtonContainer:de},fe=t.forwardRef(({children:e,position:o="auto",alignment:r,content:l,arrow:n=!0,title:i,primaryButtonLabel:C,secondaryButtonLabel:y,className:T="",triggerStyles:j,closeOnClickOutside:g=!0,closeOnEscape:E=!0,onClickPrimaryButton:_,onClickSecondaryButton:h,...O},v)=>{const d=t.useRef(null),[c,q]=t.useState(null),[D,L]=t.useState(o),[B,I]=t.useState(r),[k,K]=t.useState({top:0,left:0}),[u,f]=t.useState(!1),{shouldRender:P,isAnimating:b}=ee(u,150),[V,w]=t.useState(!1),m=t.useCallback(()=>{if(!d.current||!c)return;const s=o==="auto"?z(d.current,c,"top",n?S:N):o,A=r||H(d.current,c,s),W=J(s,d.current,c,n?S:N,A);I(A),K(W),L(s)},[o,n,c,r]),F=t.useCallback(()=>{g&&f(!1)},[g]),G=t.useCallback(()=>{E&&f(!1)},[E]);se(c,P),oe(F,d.current,c),re(G),ne(m);const M=t.useCallback(s=>{q(s),typeof v=="function"?v(s):v&&(v.current=s),s&&u&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{m()})})},[v,u,m]);t.useEffect(()=>{u&&c?(m(),w(!0)):w(!1)},[u,c,m]);const U=s=>{s.key===Z&&(s.preventDefault(),u||f(!0))},Y=s=>{u||(s.preventDefault(),f(!0))},$=()=>{h&&h(),f(!1)},Q=()=>{_&&_(),f(!1)};return a.jsxs("div",{ref:d,className:x(p.popoverTrigger),onClick:Y,onKeyDown:U,style:j,children:[e,P&&a.jsx(X,{children:a.jsx("div",{ref:M,className:x(p.popover,T),role:"dialog","aria-modal":"true","data-arrow":n,"data-position":D,"data-alignment":B,"data-open":V&&b||void 0,style:{top:`${k.top}px`,left:`${k.left}px`},...O,children:a.jsxs("div",{className:p.popoverInner,children:[a.jsxs("div",{className:p.popoverContentContainer,children:[i&&a.jsx("div",{className:p.popoverTitle,children:i}),a.jsx("div",{className:p.popoverContent,children:l})]}),a.jsxs("div",{className:p.popoverButtonContainer,children:[y&&a.jsx(R,{className:"popoverButton",onClick:$,label:y,variant:"secondary"}),a.jsx(R,{className:"popoverButton",onClick:Q,label:C,variant:"primary"})]})]})})})]})});fe.__docgenInfo={description:"",methods:[],displayName:"Popover",props:{content:{required:!0,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},triggerStyles:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},position:{defaultValue:{value:'"auto"',computed:!1},required:!1},arrow:{defaultValue:{value:"true",computed:!1},required:!1},className:{defaultValue:{value:'""',computed:!1},required:!1},closeOnClickOutside:{defaultValue:{value:"true",computed:!1},required:!1},closeOnEscape:{defaultValue:{value:"true",computed:!1},required:!1}},composes:["CorePopoverProps","Omit"]};export{fe as P};
