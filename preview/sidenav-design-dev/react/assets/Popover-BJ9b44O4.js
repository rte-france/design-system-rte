import{j as t}from"./jsx-runtime-Cf8x2fCZ.js";import{g as J,b as Q,a as U}from"./auto-placement-C6RxYMtA.js";import{E as X}from"./keyboard.constants-ep-ZHn_7.js";import{r as e}from"./index-G8LIXM5I.js";import{u as Z}from"./useAnimatedMount-_zPBpYOt.js";import{b as ee,u as oe,a as te}from"./useKeydownEscape-B9tjvDNB.js";import{B as A}from"./Button-BGjTm3Lt.js";import{O as re}from"./Overlay-CwMsU-JP.js";import{c as E}from"./index-DSdvzt-y.js";const x=8,N=20,se=i=>{e.useEffect(()=>(window.addEventListener("scroll",i,!0),()=>{window.removeEventListener("scroll",i,!0)}),[i])},ne="_popoverTrigger_50c8k_3",ae="_popover_50c8k_3",pe="_popoverInner_50c8k_26",ie="_popoverContentContainer_50c8k_34",le="_popoverTitle_50c8k_41",ce="_popoverContent_50c8k_34",ue="_popoverButtonContainer_50c8k_65",n={popoverTrigger:ne,popover:ae,popoverInner:pe,popoverContentContainer:ie,popoverTitle:le,popoverContent:ce,popoverButtonContainer:ue},de=e.forwardRef(({children:i,position:u="auto",alignment:m,content:T,arrow:d=!0,title:f,primaryButtonLabel:j,secondaryButtonLabel:v,className:w="",triggerStyles:S,closeOnClickOutside:C=!0,closeOnEscape:_=!0,onClickPrimaryButton:g,onClickSecondaryButton:P,...O},l)=>{const a=e.useRef(null),[r,q]=e.useState(null),[B,V]=e.useState(u),[b,I]=e.useState(m),[y,K]=e.useState({top:0,left:0}),[s,p]=e.useState(!1),{shouldRender:R,isAnimating:D}=Z(s,150),[F,h]=e.useState(!1),c=e.useCallback(()=>{if(!a.current||!r)return;const o=u==="auto"?J(a.current,r,"top",d?N:x):u,k=m||Q(a.current,r,o),H=U(o,a.current,r,d?N:x,k);I(k),K(H),V(o)},[u,d,r,m]),G=e.useCallback(()=>{C&&p(!1)},[C]),$=e.useCallback(()=>{_&&p(!1)},[_]);ee(r,R),oe(G,a.current,r),te($),se(c);const L=e.useCallback(o=>{q(o),typeof l=="function"?l(o):l&&(l.current=o),o&&s&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{c()})})},[l,s,c]);e.useEffect(()=>{s&&r?(c(),h(!0)):h(!1)},[s,r,c]);const M=o=>{o.key===X&&(o.preventDefault(),s||p(!0))},W=o=>{s||(o.preventDefault(),p(!0))},Y=()=>{P&&P(),p(!1)},z=()=>{g&&g(),p(!1)};return t.jsxs("div",{ref:a,className:E(n.popoverTrigger),onClick:W,onKeyDown:M,style:S,children:[i,R&&t.jsx(re,{children:t.jsx("div",{ref:L,className:E(n.popover,w),role:"dialog","aria-modal":"true","data-arrow":d,"data-position":B,"data-alignment":b,"data-open":F&&D||void 0,style:{top:`${y.top}px`,left:`${y.left}px`},...O,children:t.jsxs("div",{className:n.popoverInner,children:[t.jsxs("div",{className:n.popoverContentContainer,children:[f&&t.jsx("div",{className:n.popoverTitle,children:f}),t.jsx("div",{className:n.popoverContent,children:T})]}),t.jsxs("div",{className:n.popoverButtonContainer,children:[v&&t.jsx(A,{className:"popoverButton",onClick:Y,label:v,variant:"secondary"}),t.jsx(A,{className:"popoverButton",onClick:z,label:j,variant:"primary"})]})]})})})]})});de.__docgenInfo={description:"",methods:[],displayName:"Popover",props:{content:{required:!0,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},triggerStyles:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},position:{defaultValue:{value:'"auto"',computed:!1},required:!1},arrow:{defaultValue:{value:"true",computed:!1},required:!1},className:{defaultValue:{value:'""',computed:!1},required:!1},closeOnClickOutside:{defaultValue:{value:"true",computed:!1},required:!1},closeOnEscape:{defaultValue:{value:"true",computed:!1},required:!1}},composes:["CorePopoverProps","Omit"]};export{de as P};
