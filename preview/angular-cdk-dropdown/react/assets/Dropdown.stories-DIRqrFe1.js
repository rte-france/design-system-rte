import{j as t}from"./jsx-runtime-Cf8x2fCZ.js";import{r as l}from"./index-G8LIXM5I.js";import{u as be,b as J,c as Q,a as Z,O as ye}from"./Overlay-BozqJJVk.js";import{T as N,S as U,E as V,c as L,d as $,e as Y}from"./keyboard.constants-YQ0IdItO.js";import{u as re}from"./useActiveKeyboard-CyCI8mio.js";import{c as he}from"./index-DSdvzt-y.js";import{D as ee}from"./Divider-B0TD5a92.js";import{I as q}from"./Icon-DjEid3Hw.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-CqkleIqs.js";import"./index-DoK7PxrN.js";import"./index-fNjTmf9T.js";let D={};const v={};class p{static generateId(){return`dropdown-${Math.random().toString(36).substring(2,9)}`}static isOpen(e){return D[e]||!1}static open(e){D[e]=!0,this.notifyListeners(e)}static close(e){delete D[e],this.notifyListeners(e)}static closeAll(){D={},Object.values(v).flat().forEach(e=>e())}static getOpenedDropdowns(){return Object.keys(D)}static getParentDropdownId(e){const o=e.split("-");return o.length<=2?null:(o.pop(),o.join("-"))}static closeSubMenus(e){Object.keys(D).filter(a=>a.startsWith(e)&&a!==e).forEach(a=>p.close(a))}static subscribe(e,o){return v[e]||(v[e]=[]),v[e].push(o),()=>{v[e]=v[e].filter(r=>r!==o)}}static notifyListeners(e){var o;(o=v[e])==null||o.forEach(r=>r())}}const B=l.createContext(void 0),ae=({dropdownId:s,closeRoot:e,autoClose:o=!0,children:r})=>t.jsx(B.Provider,{value:{dropdownId:s,closeRoot:e,autoClose:o},children:r});ae.__docgenInfo={description:"",methods:[],displayName:"DropdownContextProvider",props:{dropdownId:{required:!0,tsType:{name:"string"},description:""},autoClose:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},closeRoot:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const ve="_trigger_k2759_3",Ce="_dropdown_k2759_15",H={trigger:ve,dropdown:Ce,"dropdown-items":"_dropdown-items_k2759_40"},te=s=>{var r;const e=le(s),o=e.findIndex(a=>a===document.activeElement);o<e.length-1?e[o+1].focus():(r=e[0])==null||r.focus()},De=s=>{var r;const e=le(s),o=e.findIndex(a=>a===document.activeElement);o>0?e[o-1].focus():(r=e[e.length-1])==null||r.focus()},je=s=>{var o;const e=document.querySelector(`[data-dropdown-id='${s}']`);e&&((o=(e==null?void 0:e.querySelectorAll('li[role="menuitem"]'))[0])==null||o.focus())},Ee=s=>{var r;const e=p.getParentDropdownId(s),o=document.querySelector(`[data-dropdown-id='${e}']`);(r=o==null?void 0:o.querySelector("[data-active=true]"))==null||r.focus()},le=s=>{const e=s==null?void 0:s.querySelectorAll('li[role="menuitem"]');return e?Array.from(e):[]},ie=s=>{const e=l.useRef(s||p.generateId()),[o,r]=l.useState(!1);l.useEffect(()=>p.subscribe(e.current,()=>{r(p.isOpen(e.current))}),[]);const a=()=>{p.open(e.current)},u=()=>{p.close(e.current)},I=()=>{o?u():a()};return{dropdownId:e.current,isOpen:o,open:a,close:u,toggle:I}},F=l.forwardRef(({trigger:s,className:e,style:o,dropdownId:r,hasParent:a,position:u="bottom",autoClose:I=!0,isOpen:x=!1,onClose:R=()=>{},children:m,offset:b=0,...O},f)=>{const{dropdownId:y}=ie(r),[S,j]=l.useState(u),{closeRoot:E}=l.useContext(B)||{},k=l.useRef(null),P=l.useRef(null),[c,_]=l.useState(null),[d,de]=l.useState(null),[W,X]=l.useState({top:500,left:500}),{shouldRender:ce,isAnimating:pe}=be(x,150),ue=l.useCallback(n=>{P.current=n,_(n),typeof f=="function"?f(n):f&&(f.current=n)},[f]),me=l.useCallback(n=>{k.current=n,de(n)},[]),T=l.useCallback(()=>{a&&E?E():R(),p.closeAll()},[E,a,R]),fe=n=>{if(n.key===L||n.key===$){if(n.stopPropagation(),n.preventDefault(),c===null)return;n.key===L?te(c):De(c)}n.key===Y&&T()},we=n=>{if(n.key===N){if(c===null)return;n.preventDefault(),te(c)}},{onKeyDown:ge,onKeyUp:xe}=re({onKeyUp:fe},{interactiveKeyCodes:[U,V,N,L,$,Y]});l.useEffect(()=>{const n=w=>{var M;const g=w.target,h=document.querySelectorAll("[data-dropdown-id]");Array.from(h).some(Ie=>Ie.contains(g))||((M=k.current)==null?void 0:M.contains(g))||T()};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[T]);const z=l.useCallback((n,w)=>{const g=J(n,w,"right",b,!0),h=Q(n,w,g),A=Z(g,n,w,b,h);j(g),X(A)},[b]),G=l.useCallback((n,w,g)=>{const h=g==="auto"?J(n,w,"bottom"):g,A=Q(n,w,h),M=Z(h,n,w,b,A);j(h),X(M)},[b]);return l.useEffect(()=>{x&&(!d||!c||(a?z(d,c):G(d,c,u)))},[x,a,c,d,u,z,G]),t.jsxs(ae,{dropdownId:y,closeRoot:T,autoClose:I,children:[t.jsx("div",{ref:me,className:H.trigger,tabIndex:-1,onKeyDown:we,children:s}),ce&&t.jsx(ye,{children:t.jsx("div",{className:he(H.dropdown,e),"data-dropdown-id":y,"data-position":S,"data-open":pe||void 0,...O,style:{...o,top:W.top,left:W.left},ref:ue,onKeyUp:xe,onKeyDown:ge,children:t.jsx("ul",{className:H["dropdown-items"],role:"menu",children:m})})})]})});F.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{trigger:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},position:{defaultValue:{value:'"bottom"',computed:!1},required:!1},autoClose:{defaultValue:{value:"true",computed:!1},required:!1},isOpen:{defaultValue:{value:"false",computed:!1},required:!1},onClose:{defaultValue:{value:"() => {}",computed:!1},required:!1},offset:{defaultValue:{value:"0",computed:!1},required:!1}},composes:["CoreDropdownProps"]};const C={"dropdown-item":"_dropdown-item_c1l0e_3","dropdown-divider":"_dropdown-divider_c1l0e_40"},i=({label:s,leftIcon:e,trailingText:o,disabled:r,hasSeparator:a,hasIndent:u,children:I,onClick:x,...R})=>{const{dropdownId:m,autoClose:b,closeRoot:O}=l.useContext(B)||{},f=`${m}-${s&&s.replace(/\s+/g,"")}`,{isOpen:y,open:S}=ie(f),j=()=>{m&&(p.closeSubMenus(m),S())},E=()=>{m&&p.closeSubMenus(m)};u&&e&&console.warn(`DropdownItem: 'hasIndent' prop is ignored when 'leftIcon' is provided : displaying icon '${e}' for dropdownitem with label '${s}' without indentation.`);const k=d=>{r||(x&&x(d),b&&O&&O())},P=d=>{if(d.preventDefault(),d.key===N&&(y&&je(f),d.shiftKey&&m&&Ee(m)),d.key===V||d.key===U){if(r)return;x&&k(d),I&&S()}},{onKeyUp:c,onFocus:_}=re({onKeyUp:P,onFocus:E},{interactiveKeyCodes:[U,V,N,L,$,Y]});return I?t.jsx(F,{hasParent:!0,dropdownId:f,isOpen:y,trigger:t.jsxs(t.Fragment,{children:[t.jsxs("li",{className:C["dropdown-item"],"data-active":y,"data-disabled":r,role:"menuitem",onMouseOver:j,onKeyUp:c,onFocus:_,tabIndex:0,children:[u&&t.jsx("span",{style:{width:"20px"}}),e&&t.jsx(q,{name:e,className:C["dropdown-item-icon"],appearance:y?"filled":"outlined"}),t.jsx("span",{style:{flex:"2"},children:s}),t.jsx(q,{name:"arrow-chevron-right",className:C["dropdown-item-icon"]})]}),a&&t.jsx("div",{className:C["dropdown-divider"],children:t.jsx(ee,{})})]}),children:I}):t.jsxs(t.Fragment,{children:[t.jsxs("li",{className:C["dropdown-item"],"data-disabled":r,role:"menuitem",onClick:k,onMouseOver:j,onKeyUp:c,onFocus:_,tabIndex:0,...R,children:[u&&!e&&t.jsx("span",{style:{width:"20px"}}),e&&t.jsx(q,{name:e,className:C["dropdown-item-icon"]}),t.jsx("span",{style:{flex:"2"},children:s}),o&&t.jsx("div",{children:o})]}),a&&t.jsx("div",{className:C["dropdown-divider"],children:t.jsx(ee,{})})]})};i.__docgenInfo={description:"",methods:[],displayName:"DropdownItem",props:{onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.MouseEvent<HTMLLIElement> | React.KeyboardEventHandler<HTMLLIElement>) => void",signature:{arguments:[{type:{name:"union",raw:"React.MouseEvent<HTMLLIElement> | React.KeyboardEventHandler<HTMLLIElement>",elements:[{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLLIElement>",elements:[{name:"HTMLLIElement"}]},{name:"ReactKeyboardEventHandler",raw:"React.KeyboardEventHandler<HTMLLIElement>",elements:[{name:"HTMLLIElement"}]}]},name:"event"}],return:{name:"void"}}},description:""}},composes:["Omit"]};const Pe={title:"Dropdown (développement en cours)",component:F,args:{}},K={args:{},render:s=>{const[e,o]=l.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsx("span",{style:{fontFamily:"sans-serif",marginBottom:16,border:"1px solid #F4922B",padding:8,borderRadius:5,backgroundColor:"#FAFFC1",margin:0},children:"Ce composant est en cours de développement et n'est pas encore disponible"})}),t.jsx("br",{}),t.jsx("div",{style:{position:"relative",width:"800px",height:"200px",display:"flex",justifyContent:"space-between",gap:"500px"},children:t.jsxs(F,{...s,onClose:()=>{o(!1)},trigger:t.jsx("button",{onClick:()=>o(!0),style:{color:"black"},children:"Click Me!"}),style:{width:"250px"},isOpen:e,children:[t.jsx(i,{label:"Messages",leftIcon:"mail",hasSeparator:!0,onClick:()=>console.log("click")}),t.jsxs(i,{label:"Actions",leftIcon:"settings",children:[t.jsxs(i,{label:"Edit",leftIcon:"edit",children:[t.jsx(i,{label:"Cut",leftIcon:"cut",trailingText:"⌘X"}),t.jsx(i,{label:"Copy",leftIcon:"copy",trailingText:"⌘X",onClick:()=>console.log("click")}),t.jsx(i,{label:"Paste",leftIcon:"paste",trailingText:"⌘V"})]}),t.jsx(i,{label:"Archive",leftIcon:"archive"}),t.jsx(i,{label:"Delete",leftIcon:"delete"})]}),t.jsx(i,{label:"Help",leftIcon:"help"}),t.jsx(i,{label:"More information",leftIcon:"info",hasSeparator:!0}),t.jsx(i,{label:"First option",hasIndent:!0}),t.jsx(i,{label:"Second option",hasIndent:!0}),t.jsx(i,{label:"Third option",hasSeparator:!0,hasIndent:!0}),t.jsx(i,{label:"Username",leftIcon:"user-circle",disabled:!0})]})})]})}};var oe,ne,se;K.parameters={...K.parameters,docs:{...(oe=K.parameters)==null?void 0:oe.docs,source:{originalSource:`{
  args: {},
  render: args => {
    const [isOpen, setIsOpen] = useState<boolean>(false);
    return <>
        <div>
          <span style={{
          fontFamily: "sans-serif",
          marginBottom: 16,
          border: "1px solid #F4922B",
          padding: 8,
          borderRadius: 5,
          backgroundColor: "#FAFFC1",
          margin: 0
        }}>
            Ce composant est en cours de développement et n'est pas encore disponible
          </span>
        </div>
        <br />

        <div style={{
        position: "relative",
        width: "800px",
        height: "200px",
        display: "flex",
        justifyContent: "space-between",
        gap: "500px"
      }}>
          <Dropdown {...args} onClose={() => {
          setIsOpen(false);
        }} trigger={<button onClick={() => setIsOpen(true)} style={{
          color: "black"
        }}>
                Click Me!
              </button>} style={{
          width: "250px"
        }} isOpen={isOpen}>
            <DropdownItem label="Messages" leftIcon="mail" hasSeparator onClick={() => console.log("click")} />
            <DropdownItem label="Actions" leftIcon="settings">
              <DropdownItem label="Edit" leftIcon="edit">
                <DropdownItem label="Cut" leftIcon="cut" trailingText="⌘X" />
                <DropdownItem label="Copy" leftIcon="copy" trailingText="⌘X" onClick={() => console.log("click")} />
                <DropdownItem label="Paste" leftIcon="paste" trailingText="⌘V" />
              </DropdownItem>
              <DropdownItem label="Archive" leftIcon="archive" />
              <DropdownItem label="Delete" leftIcon="delete" />
            </DropdownItem>
            <DropdownItem label="Help" leftIcon="help" />
            <DropdownItem label="More information" leftIcon="info" hasSeparator />
            <DropdownItem label="First option" hasIndent />
            <DropdownItem label="Second option" hasIndent />
            <DropdownItem label="Third option" hasSeparator hasIndent />
            <DropdownItem label="Username" leftIcon="user-circle" disabled />
          </Dropdown>
        </div>
      </>;
  }
}`,...(se=(ne=K.parameters)==null?void 0:ne.docs)==null?void 0:se.source}}};const qe=["Default"];export{K as Default,qe as __namedExportsOrder,Pe as default};
