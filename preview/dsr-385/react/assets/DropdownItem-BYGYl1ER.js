import{j as s}from"./jsx-runtime-Cf8x2fCZ.js";import{T as k,S as P,E as H,d as N,e as $,b as F}from"./keyboard.constants-KvjFtZ2v.js";import{r as i}from"./index-G8LIXM5I.js";import{u as Z}from"./useActiveKeyboard-D-jDyZO1.js";import{D as z}from"./Divider-DcbNFCex.js";import{I as S}from"./Icon-DjEid3Hw.js";import{c as G,b as J,a as Q,O as fe}from"./Overlay-BSes1ir3.js";import{u as we}from"./useAnimatedMount-_zPBpYOt.js";import{c as ye}from"./index-DSdvzt-y.js";let D={};const h={};class l{static generateId(){return`dropdown-${Math.random().toString(36).substring(2,9)}`}static isOpen(e){return D[e]||!1}static open(e){D[e]=!0,this.notifyListeners(e)}static close(e){delete D[e],this.notifyListeners(e)}static closeAll(){D={},Object.values(h).flat().forEach(e=>e())}static getOpenedDropdowns(){return Object.keys(D)}static getParentDropdownId(e){const t=e.split("-");return t.length<=2?null:(t.pop(),t.join("-"))}static closeSubMenus(e){Object.keys(D).filter(a=>a.startsWith(e)&&a!==e).forEach(a=>l.close(a))}static subscribe(e,t){return h[e]||(h[e]=[]),h[e].push(t),()=>{h[e]=h[e].filter(n=>n!==t)}}static notifyListeners(e){var t;(t=h[e])==null||t.forEach(n=>n())}}const U=i.createContext(void 0),ee=({dropdownId:r,closeRoot:e,autoClose:t=!0,children:n})=>s.jsx(U.Provider,{value:{dropdownId:r,closeRoot:e,autoClose:t},children:n});ee.__docgenInfo={description:"",methods:[],displayName:"DropdownContextProvider",props:{dropdownId:{required:!0,tsType:{name:"string"},description:""},autoClose:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},closeRoot:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const ve="_trigger_yp9yg_3",ge="_dropdown_yp9yg_15",q={trigger:ve,dropdown:ge,"dropdown-items":"_dropdown-items_yp9yg_41"},X=r=>{var n;const e=te(r),t=e.findIndex(a=>a===document.activeElement);t<e.length-1?e[t+1].focus():(n=e[0])==null||n.focus()},Ee=r=>{var n;const e=te(r),t=e.findIndex(a=>a===document.activeElement);t>0?e[t-1].focus():(n=e[e.length-1])==null||n.focus()},xe=r=>{var t;const e=document.querySelector(`[data-dropdown-id='${r}']`);e&&((t=(e==null?void 0:e.querySelectorAll('li[role="menuitem"]'))[0])==null||t.focus())},he=r=>{var n;const e=l.getParentDropdownId(r),t=document.querySelector(`[data-dropdown-id='${e}']`);(n=t==null?void 0:t.querySelector("[data-active=true]"))==null||n.focus()},te=r=>{const e=r==null?void 0:r.querySelectorAll('li[role="menuitem"]');return e?Array.from(e):[]},oe=r=>{const e=i.useRef(r||l.generateId()),[t,n]=i.useState(!1);i.useEffect(()=>l.subscribe(e.current,()=>{n(l.isOpen(e.current))}),[]);const a=()=>{l.open(e.current)},u=()=>{l.close(e.current)},v=()=>{t?u():a()};return{dropdownId:e.current,isOpen:t,open:a,close:u,toggle:v}},ne=i.forwardRef(({trigger:r,className:e,style:t,dropdownId:n,hasParent:a,position:u="bottom",autoClose:v=!0,isOpen:y=!1,onClose:j=()=>{},children:p,offset:g=0,..._},m)=>{const{dropdownId:E}=oe(n),[K,R]=i.useState(u),{closeRoot:I}=i.useContext(U)||{},b=i.useRef(null),T=i.useRef(null),[c,O]=i.useState(null),[d,se]=i.useState(null),[V,Y]=i.useState({top:500,left:500}),{shouldRender:re,isAnimating:ae}=we(y,150),ie=i.useCallback(o=>{T.current=o,O(o),typeof m=="function"?m(o):m&&(m.current=o)},[m]),de=i.useCallback(o=>{b.current=o,se(o)},[]),L=i.useCallback(()=>{a&&I?I():j(),l.closeAll()},[I,a,j]),ce=o=>{if(o.key===N||o.key===$){if(o.stopPropagation(),o.preventDefault(),c===null)return;o.key===N?X(c):Ee(c)}o.key===F&&L()},le=o=>{if(o.key===k){if(c===null)return;o.preventDefault(),X(c)}},{onKeyDown:ue,onKeyUp:pe}=Z({onKeyUp:ce},{interactiveKeyCodes:[P,H,k,N,$,F]});i.useEffect(()=>{const o=f=>{var M;const w=f.target,x=document.querySelectorAll("[data-dropdown-id]");Array.from(x).some(me=>me.contains(w))||((M=b.current)==null?void 0:M.contains(w))||L()};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[L]);const W=i.useCallback((o,f)=>{const w=G(o,f,"right",g,!0),x=J(o,f,w),A=Q(w,o,f,g,x);R(w),Y(A)},[g]),B=i.useCallback((o,f,w)=>{const x=w==="auto"?G(o,f,"bottom"):w,A=J(o,f,x),M=Q(x,o,f,g,A);R(x),Y(M)},[g]);return i.useEffect(()=>{y&&(!d||!c||(a?W(d,c):B(d,c,u)))},[y,a,c,d,u,W,B]),s.jsxs(ee,{dropdownId:E,closeRoot:L,autoClose:v,children:[s.jsx("div",{ref:de,className:q.trigger,tabIndex:-1,onKeyDown:le,children:r}),re&&s.jsx(fe,{children:s.jsx("div",{className:ye(q.dropdown,e),"data-dropdown-id":E,"data-position":K,"data-open":ae||void 0,..._,style:{...t,top:V.top,left:V.left},ref:ie,onKeyUp:pe,onKeyDown:ue,children:s.jsx("ul",{className:q["dropdown-items"],role:"menu",children:p})})})]})});ne.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{trigger:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},position:{defaultValue:{value:'"bottom"',computed:!1},required:!1},autoClose:{defaultValue:{value:"true",computed:!1},required:!1},isOpen:{defaultValue:{value:"false",computed:!1},required:!1},onClose:{defaultValue:{value:"() => {}",computed:!1},required:!1},offset:{defaultValue:{value:"0",computed:!1},required:!1}},composes:["CoreDropdownProps"]};const C={"dropdown-item":"_dropdown-item_c1l0e_3","dropdown-divider":"_dropdown-divider_c1l0e_40"},Ce=({label:r,leftIcon:e,trailingText:t,disabled:n,hasSeparator:a,hasIndent:u,children:v,onClick:y,...j})=>{const{dropdownId:p,autoClose:g,closeRoot:_}=i.useContext(U)||{},m=`${p}-${r&&r.replace(/\s+/g,"")}`,{isOpen:E,open:K}=oe(m),R=()=>{p&&(l.closeSubMenus(p),K())},I=()=>{p&&l.closeSubMenus(p)};u&&e&&console.warn(`DropdownItem: 'hasIndent' prop is ignored when 'leftIcon' is provided : displaying icon '${e}' for dropdownitem with label '${r}' without indentation.`);const b=d=>{n||(y&&y(d),g&&_&&_())},T=d=>{if(d.preventDefault(),d.key===k&&(E&&xe(m),d.shiftKey&&p&&he(p)),d.key===H||d.key===P){if(n)return;y&&b(d),v&&K()}},{onKeyUp:c,onFocus:O}=Z({onKeyUp:T,onFocus:I},{interactiveKeyCodes:[P,H,k,N,$,F]});return v?s.jsx(ne,{hasParent:!0,dropdownId:m,isOpen:E,trigger:s.jsxs(s.Fragment,{children:[s.jsxs("li",{className:C["dropdown-item"],"data-active":E,"data-disabled":n,role:"menuitem",onMouseOver:R,onKeyUp:c,onFocus:O,tabIndex:0,children:[u&&s.jsx("span",{style:{width:"20px"}}),e&&s.jsx(S,{name:e,className:C["dropdown-item-icon"],appearance:E?"filled":"outlined"}),s.jsx("span",{style:{flex:"2"},children:r}),s.jsx(S,{name:"arrow-chevron-right",className:C["dropdown-item-icon"]})]}),a&&s.jsx("div",{className:C["dropdown-divider"],children:s.jsx(z,{})})]}),children:v}):s.jsxs(s.Fragment,{children:[s.jsxs("li",{className:C["dropdown-item"],"data-disabled":n,role:"menuitem",onClick:b,onMouseOver:R,onKeyUp:c,onFocus:O,tabIndex:0,...j,children:[u&&!e&&s.jsx("span",{style:{width:"20px"}}),e&&s.jsx(S,{name:e,className:C["dropdown-item-icon"]}),s.jsx("span",{style:{flex:"2"},children:r}),t&&s.jsx("div",{children:t})]}),a&&s.jsx("div",{className:C["dropdown-divider"],children:s.jsx(z,{})})]})};Ce.__docgenInfo={description:"",methods:[],displayName:"DropdownItem",props:{onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.MouseEvent<HTMLLIElement> | React.KeyboardEvent<HTMLLIElement>) => void",signature:{arguments:[{type:{name:"union",raw:"React.MouseEvent<HTMLLIElement> | React.KeyboardEvent<HTMLLIElement>",elements:[{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLLIElement>",elements:[{name:"HTMLLIElement"}]},{name:"ReactKeyboardEvent",raw:"React.KeyboardEvent<HTMLLIElement>",elements:[{name:"HTMLLIElement"}]}]},name:"event"}],return:{name:"void"}}},description:""}},composes:["Omit"]};export{ne as D,Ce as a};
