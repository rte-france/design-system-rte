import{j as e}from"./jsx-runtime-Cf8x2fCZ.js";import{r as i}from"./index-G8LIXM5I.js";import{I as _}from"./Icon-DjEid3Hw.js";import{I as X}from"./IconButton-BoUdRPMh.js";import{L as Y}from"./Link-DbCKFFRz.js";import{c as Z}from"./index-DSdvzt-y.js";const P="_container_ttc3e_3",A="_inputContainer_ttc3e_12",ee="_input_ttc3e_12",te="_inputBar_ttc3e_16",se="_inputField_ttc3e_16",ae="_text_ttc3e_23",ie="_inputCounter_ttc3e_27",ne="_leftIcon_ttc3e_30",re="_labelContainer_ttc3e_42",le="_inputLabel_ttc3e_46",ce="_requiredText_ttc3e_54",oe="_requiredIconContainer_ttc3e_67",ue="_withLeftIcon_ttc3e_89",de="_withRightIcon_ttc3e_92",pe="_rightIcon_ttc3e_100",fe="_assistiveText_ttc3e_153",me="_assistiveIconError_ttc3e_159",_e="_assistiveLabel_ttc3e_165",t={container:P,inputContainer:A,input:ee,inputBar:te,inputField:se,text:ae,inputCounter:ie,leftIcon:ne,labelContainer:re,inputLabel:le,requiredText:ce,requiredIconContainer:oe,withLeftIcon:ue,withRightIcon:de,rightIcon:pe,assistiveText:fe,assistiveIconError:me,assistiveLabel:_e},ve=i.forwardRef(({id:v,label:q,labelPosition:c="top",required:R=!1,showCounter:E,value:n,leftIcon:O,showRightIcon:r=!0,rightIconAction:a="clean",showLabelRequirement:g=!1,assistiveAppearance:o="description",showAssistiveIcon:y=!1,assistiveTextLabel:x="",error:h=!1,maxLength:u,disabled:I,readOnly:b,width:B,onChange:d,onRightIconClick:L,compactSpacing:k,...F},p)=>{const S=i.useRef(null),z=s=>["visibilityOn","visibilityOff"].includes(s)?f?"visibility-show":"visibility-hide":s==="clean"?"close":"",H=s=>["visibilityOn","visibilityOff"].includes(s)?f?"show text":"hide text":s==="clean"?"clear":"",[l,C]=i.useState(n??""),[w,N]=i.useState(l.length),[f,T]=i.useState(!!r&&a==="visibilityOn");i.useEffect(()=>{n!==void 0&&(C(n),N(n.length))},[n]),i.useEffect(()=>{T(!!r&&a==="visibilityOn")},[r,a]);const $=s=>{const j=s.target.value;C(j),N(j.length),d&&d(j)},D=()=>{a==="clean"&&(C(""),N(0),d&&d("")),["visibilityOn","visibilityOff"].includes(a)&&J()},G=()=>{L&&L(),D()},J=()=>{T(!f)},m=h?"error":O,K=Z(t.inputBar,m?t.withLeftIcon:"",a?t.withRightIcon:""),V=E&&typeof u=="number",M=z(a),Q=H(a),U=()=>b||I?!1:a==="clean"?!!(l!=null&&l.length)&&r:r&&!!a,W=R?g?e.jsx("span",{className:t.requiredText,children:"(obligatoire)"}):e.jsx("span",{className:t.requiredIconContainer,children:e.jsx(_,{name:"asterisk",size:8})}):g?e.jsx("span",{className:t.requiredText,children:"(optionnel)"}):null;return e.jsxs("div",{className:t.container,"data-label-position":c,"data-error":h,style:{width:B},"data-compact-spacing":k,children:[q&&e.jsxs("div",{className:t.text,children:[e.jsxs("div",{className:t.labelContainer,children:[e.jsxs("label",{className:t.inputLabel,id:`inputLabel-${v}`,htmlFor:v,children:[" ",q," "]}),W]}),V&&c==="top"&&e.jsxs("p",{className:t.inputCounter,"data-testid":"input-counter",children:[" ",w,"/",u]})]}),e.jsxs("div",{className:t.inputContainer,children:[e.jsx("div",{className:t.input,"data-label-position":c,"data-disabled":I,"data-read-only":b,children:e.jsxs("div",{className:K,children:[m&&e.jsx(_,{name:m,appearance:"outlined",className:t.leftIcon,"aria-hidden":"true","data-testid":`left-icon ${m}`}),e.jsx("input",{id:v,ref:s=>{S.current=s,typeof p=="function"?p(s):p&&(p.current=s)},type:f?"password":"text","data-error":h,className:t.inputField,maxLength:u,onChange:$,disabled:I,readOnly:b,value:l,...F}),U()&&e.jsx(X,{name:M,appearance:"outlined",variant:"transparent",className:t.rightIcon,"aria-label":Q,onClick:G,"data-testid":"right-icon"})]})}),x&&e.jsxs("div",{className:t.assistiveText,children:[y&&o==="error"&&e.jsx(_,{name:"error",appearance:"outlined",className:t.assistiveIconError,size:12}),y&&o==="success"&&e.jsx(_,{name:"check",appearance:"outlined",className:t.assistiveIconSucces,size:12}),o==="link"?e.jsx(Y,{label:x}):e.jsxs("p",{className:t.assistiveLabel,"data-appearance":o,children:[" ",x," "]})]})]}),V&&c=="side"&&e.jsxs("p",{className:t.inputCounter,"data-testid":"input-counter",children:[" ",w,"/",u," "]})]})});ve.__docgenInfo={description:"",methods:[],displayName:"TextInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},labelPosition:{defaultValue:{value:'"top"',computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1},showRightIcon:{defaultValue:{value:"true",computed:!1},required:!1},rightIconAction:{defaultValue:{value:'"clean"',computed:!1},required:!1},showLabelRequirement:{defaultValue:{value:"false",computed:!1},required:!1},assistiveAppearance:{defaultValue:{value:'"description"',computed:!1},required:!1},showAssistiveIcon:{defaultValue:{value:"false",computed:!1},required:!1},assistiveTextLabel:{defaultValue:{value:'""',computed:!1},required:!1},error:{defaultValue:{value:"false",computed:!1},required:!1}},composes:["CoreTextInputProps","Omit"]};export{ve as T};
