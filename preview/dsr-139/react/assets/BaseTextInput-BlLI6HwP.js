import{j as e}from"./jsx-runtime-Cf8x2fCZ.js";import{r as i}from"./index-G8LIXM5I.js";import{I as _}from"./Icon-DjEid3Hw.js";import{I as Z}from"./IconButton-CYFOPNzz.js";import{L as P}from"./Link-DbCKFFRz.js";import{c as A}from"./index-DSdvzt-y.js";const ee="_container_fwodr_3",te="_inputContainer_fwodr_12",se="_input_fwodr_12",ae="_inputBar_fwodr_16",ie="_inputField_fwodr_16",ne="_text_fwodr_23",re="_inputCounter_fwodr_27",le="_leftIcon_fwodr_30",oe="_labelContainer_fwodr_42",ue="_inputLabel_fwodr_46",ce="_requiredText_fwodr_54",de="_requiredIconContainer_fwodr_67",fe="_withLeftIcon_fwodr_89",pe="_withRightIcon_fwodr_92",me="_rightIcon_fwodr_100",_e="_assistiveText_fwodr_151",ve="_assistiveIconError_fwodr_157",xe="_assistiveLabel_fwodr_163",t={container:ee,inputContainer:te,input:se,inputBar:ae,inputField:ie,text:ne,inputCounter:re,leftIcon:le,labelContainer:oe,inputLabel:ue,requiredText:ce,requiredIconContainer:de,withLeftIcon:fe,withRightIcon:pe,rightIcon:me,assistiveText:_e,assistiveIconError:ve,assistiveLabel:xe},he=i.forwardRef(({id:v,label:N,labelPosition:o="top",required:V=!1,showCounter:B,value:n,leftIcon:E,showRightIcon:r=!0,rightIconAction:a="clean",showLabelRequirement:j=!1,assistiveAppearance:u="description",showAssistiveIcon:g=!1,assistiveTextLabel:x="",error:h=!1,maxLength:c,disabled:I,readOnly:b,width:O,onChange:d,onRightIconClick:y,compactSpacing:S,...k},f)=>{const F=i.useRef(null),z=s=>["visibilityOn","visibilityOff"].includes(s)?p?"visibility-show":"visibility-hide":s==="clean"?"cancel":"",H=s=>["visibilityOn","visibilityOff"].includes(s)?p?"show text":"hide text":s==="clean"?"clear":"",[l,w]=i.useState(n??""),[L,C]=i.useState(l.length),[p,T]=i.useState(!!r&&a==="visibilityOn");i.useEffect(()=>{n!==void 0&&(w(n),C(n.length))},[n]),i.useEffect(()=>{T(!!r&&a==="visibilityOn")},[r,a]);const $=s=>{const q=s.target.value;w(q),C(q.length),d&&d(q)},D=()=>{a==="clean"&&(w(""),C(0),d&&d("")),["visibilityOn","visibilityOff"].includes(a)&&J()},G=()=>{y&&y(),D()},J=()=>{T(!p)},m=h?"error":E,K=A(t.inputBar,m?t.withLeftIcon:"",a?t.withRightIcon:""),R=B&&typeof c=="number",M=z(a),Q=H(a),U=()=>b||I?!1:a==="clean"?!!(l!=null&&l.length)&&r:r&&!!a,W=j?e.jsx("span",{className:t.requiredText,children:"(obligatoire)"}):e.jsx("span",{className:t.requiredIconContainer,children:e.jsx(_,{name:"asterisk",size:8})}),X=j?e.jsx("span",{className:t.requiredText,children:"(optionnel)"}):null,Y=V?W:X;return e.jsxs("div",{className:t.container,"data-label-position":o,"data-error":h,style:{width:O},"data-compact-spacing":S,children:[N&&e.jsxs("div",{className:t.text,children:[e.jsxs("div",{className:t.labelContainer,children:[e.jsxs("label",{className:t.inputLabel,id:`inputLabel-${v}`,htmlFor:v,children:[" ",N," "]}),Y]}),R&&o==="top"&&e.jsxs("p",{className:t.inputCounter,"data-testid":"input-counter",children:[" ",L,"/",c]})]}),e.jsxs("div",{className:t.inputContainer,children:[e.jsx("div",{className:t.input,"data-label-position":o,"data-disabled":I,"data-read-only":b,children:e.jsxs("div",{className:K,children:[m&&e.jsx(_,{name:m,appearance:"outlined",className:t.leftIcon,"aria-hidden":"true","data-testid":`left-icon ${m}`}),e.jsx("input",{id:v,ref:s=>{F.current=s,typeof f=="function"?f(s):f&&(f.current=s)},type:p?"password":"text","data-error":h,className:t.inputField,maxLength:c,onChange:$,disabled:I,readOnly:b,value:l,...k}),U()&&e.jsx(Z,{name:M,appearance:"outlined",variant:"neutral",size:"s",compactSpacing:!0,className:t.rightIcon,"aria-label":Q,onClick:G,"data-testid":"right-icon"})]})}),x&&e.jsxs("div",{className:t.assistiveText,children:[g&&u==="error"&&e.jsx(_,{name:"error",appearance:"outlined",className:t.assistiveIconError,size:12}),g&&u==="success"&&e.jsx(_,{name:"check",appearance:"outlined",className:t.assistiveIconSucces,size:12}),u==="link"?e.jsx(P,{label:x}):e.jsxs("p",{className:t.assistiveLabel,"data-appearance":u,children:[" ",x," "]})]})]}),R&&o=="side"&&e.jsxs("p",{className:t.inputCounter,"data-testid":"input-counter",children:[" ",L,"/",c," "]})]})});he.__docgenInfo={description:"",methods:[],displayName:"BaseTextInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},labelPosition:{defaultValue:{value:'"top"',computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1},showRightIcon:{defaultValue:{value:"true",computed:!1},required:!1},rightIconAction:{defaultValue:{value:'"clean"',computed:!1},required:!1},showLabelRequirement:{defaultValue:{value:"false",computed:!1},required:!1},assistiveAppearance:{defaultValue:{value:'"description"',computed:!1},required:!1},showAssistiveIcon:{defaultValue:{value:"false",computed:!1},required:!1},assistiveTextLabel:{defaultValue:{value:'""',computed:!1},required:!1},error:{defaultValue:{value:"false",computed:!1},required:!1}},composes:["CoreTextInputProps","Omit"]};export{he as B};
