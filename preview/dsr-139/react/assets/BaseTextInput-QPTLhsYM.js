import{j as e}from"./jsx-runtime-Cf8x2fCZ.js";import{r as i}from"./index-G8LIXM5I.js";import{I as h}from"./Icon-DjEid3Hw.js";import{I as ee}from"./IconButton-CYFOPNzz.js";import{L as te}from"./Link-DbCKFFRz.js";import{c as se}from"./index-DSdvzt-y.js";const ae="_container_cglc7_3",ie="_inputContainer_cglc7_12",ne="_input_cglc7_12",le="_inputBar_cglc7_16",re="_inputField_cglc7_16",ce="_text_cglc7_23",oe="_inputCounter_cglc7_27",ue="_leftIcon_cglc7_30",de="_labelContainer_cglc7_42",pe="_inputLabel_cglc7_46",fe="_requiredText_cglc7_54",me="_requiredIconContainer_cglc7_67",_e="_withLeftIcon_cglc7_93",he="_withRightIcon_cglc7_96",ge="_rightIcon_cglc7_104",ve="_assistiveText_cglc7_158",xe="_assistiveIconError_cglc7_164",Ie="_assistiveLabel_cglc7_170",t={container:ae,inputContainer:ie,input:ne,inputBar:le,inputField:re,text:ce,inputCounter:oe,leftIcon:ue,labelContainer:de,inputLabel:pe,requiredText:fe,requiredIconContainer:me,withLeftIcon:_e,withRightIcon:he,rightIcon:ge,assistiveText:ve,assistiveIconError:xe,assistiveLabel:Ie},be=i.forwardRef(({id:g,label:N,labelPosition:o="top",required:S=!1,showCounter:B,value:n,leftIcon:E,showRightIcon:l=!0,rightIconAction:a="clean",showLabelRequirement:j=!1,assistiveAppearance:u="description",showAssistiveIcon:y=!1,assistiveTextLabel:v="",error:x=!1,maxLength:d,disabled:r,readOnly:I,width:O,onChange:p,onRightIconClick:L,compactSpacing:k,placeholder:F,rightSlot:T,highlighted:z,...H},f)=>{const $=i.useRef(null),D=s=>["visibilityOn","visibilityOff"].includes(s)?m?"visibility-show":"visibility-hide":s==="clean"?"cancel":"",G=s=>["visibilityOn","visibilityOff"].includes(s)?m?"show text":"hide text":s==="clean"?"clear":"",[c,b]=i.useState(n??""),[R,q]=i.useState(c.length),[m,w]=i.useState(!!l&&a==="visibilityOn");i.useEffect(()=>{n!==void 0&&(b(n),q(n.length))},[n]),i.useEffect(()=>{w(!!l&&a==="visibilityOn")},[l,a]);const J=s=>{const C=s.target.value;b(C),q(C.length),p&&p(C)},K=()=>{a==="clean"&&(b(""),q(0),p&&p("")),["visibilityOn","visibilityOff"].includes(a)&&P()},M=()=>{L&&L(),K()},P=()=>{w(!m)},_=x?"error":E,Q=se(t.inputBar,_?t.withLeftIcon:"",a?t.withRightIcon:""),V=B&&typeof d=="number",U=D(a),W=G(a),X=()=>I||r?!1:a==="clean"?!!(c!=null&&c.length)&&l:l&&!!a,Y=j?e.jsx("span",{className:t.requiredText,children:"(obligatoire)"}):e.jsx("span",{className:t.requiredIconContainer,children:e.jsx(h,{name:"asterisk",size:8})}),Z=j?e.jsx("span",{className:t.requiredText,children:"(optionnel)"}):null,A=S?Y:Z;return e.jsxs("div",{className:t.container,"data-label-position":o,"data-error":x,style:{width:O},"data-compact-spacing":k,children:[N&&e.jsxs("div",{className:t.text,children:[e.jsxs("div",{className:t.labelContainer,children:[e.jsxs("label",{className:t.inputLabel,id:`inputLabel-${g}`,htmlFor:g,children:[" ",N," "]}),A]}),V&&o==="top"&&e.jsxs("p",{className:t.inputCounter,"data-testid":"input-counter",children:[" ",R,"/",d]})]}),e.jsxs("div",{className:t.inputContainer,children:[e.jsxs("div",{className:t.input,"data-label-position":o,"data-disabled":r,"data-read-only":I,children:[e.jsxs("div",{className:Q,children:[_&&e.jsx(h,{name:_,appearance:"outlined",className:t.leftIcon,"aria-hidden":"true","data-testid":`left-icon ${_}`}),e.jsx("input",{id:g,ref:s=>{$.current=s,typeof f=="function"?f(s):f&&(f.current=s)},type:m?"password":"text","data-error":x,"data-highlighted":z,className:t.inputField,maxLength:d,onChange:J,disabled:r,readOnly:I,value:r?"":c,placeholder:r?"":F,...H}),X()&&e.jsx(ee,{name:U,appearance:"outlined",variant:"neutral",size:"s",compactSpacing:!0,className:t.rightIcon,"aria-label":W,onClick:M,"data-testid":"right-icon"})]}),T&&e.jsx("div",{className:t.rightSlot,children:T})]}),v&&e.jsxs("div",{className:t.assistiveText,children:[y&&u==="error"&&e.jsx(h,{name:"error",appearance:"outlined",className:t.assistiveIconError,size:12}),y&&u==="success"&&e.jsx(h,{name:"check",appearance:"outlined",className:t.assistiveIconSucces,size:12}),u==="link"?e.jsx(te,{label:v}):e.jsxs("p",{className:t.assistiveLabel,"data-appearance":u,children:[" ",v," "]})]})]}),V&&o=="side"&&e.jsxs("p",{className:t.inputCounter,"data-testid":"input-counter",children:[" ",R,"/",d," "]})]})});be.__docgenInfo={description:"",methods:[],displayName:"BaseTextInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},rightSlot:{required:!1,tsType:{name:"ReactNode"},description:""},inputStyle:{required:!1,tsType:{name:"CSSProperties"},description:""},highlighted:{required:!1,tsType:{name:"boolean"},description:""},labelPosition:{defaultValue:{value:'"top"',computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1},showRightIcon:{defaultValue:{value:"true",computed:!1},required:!1},rightIconAction:{defaultValue:{value:'"clean"',computed:!1},required:!1},showLabelRequirement:{defaultValue:{value:"false",computed:!1},required:!1},assistiveAppearance:{defaultValue:{value:'"description"',computed:!1},required:!1},showAssistiveIcon:{defaultValue:{value:"false",computed:!1},required:!1},assistiveTextLabel:{defaultValue:{value:'""',computed:!1},required:!1},error:{defaultValue:{value:"false",computed:!1},required:!1}},composes:["CoreTextInputProps","Omit"]};export{be as B};
