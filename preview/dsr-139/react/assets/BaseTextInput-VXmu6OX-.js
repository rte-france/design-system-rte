import{j as e}from"./jsx-runtime-Cf8x2fCZ.js";import{r as n}from"./index-G8LIXM5I.js";import{I as h}from"./Icon-DjEid3Hw.js";import{I as ee}from"./IconButton-CYFOPNzz.js";import{L as te}from"./Link-DbCKFFRz.js";import{c as se}from"./index-DSdvzt-y.js";const ae="_container_1lnz9_3",ne="_inputContainer_1lnz9_12",ie="_input_1lnz9_12",le="_inputBar_1lnz9_16",re="_inputField_1lnz9_16",oe="_text_1lnz9_23",ce="_inputCounter_1lnz9_27",ue="_leftIcon_1lnz9_30",de="_labelContainer_1lnz9_42",pe="_inputLabel_1lnz9_46",fe="_requiredText_1lnz9_54",me="_requiredIconContainer_1lnz9_67",_e="_withLeftIcon_1lnz9_93",he="_withRightIcon_1lnz9_96",ve="_rightIcon_1lnz9_104",xe="_assistiveText_1lnz9_158",Ie="_assistiveIconError_1lnz9_164",be="_assistiveLabel_1lnz9_170",t={container:ae,inputContainer:ne,input:ie,inputBar:le,inputField:re,text:oe,inputCounter:ce,leftIcon:ue,labelContainer:de,inputLabel:pe,requiredText:fe,requiredIconContainer:me,withLeftIcon:_e,withRightIcon:he,rightIcon:ve,assistiveText:xe,assistiveIconError:Ie,assistiveLabel:be},qe=n.forwardRef(({id:v,label:g,labelPosition:o="top",required:V=!1,showCounter:S,value:i,leftIcon:B,showRightIcon:l=!0,rightIconAction:a="clean",showLabelRequirement:j=!1,assistiveAppearance:c="description",showAssistiveIcon:y=!1,assistiveTextLabel:x="",error:I=!1,maxLength:u,disabled:d,readOnly:b,width:E,onChange:p,onRightIconClick:z,compactSpacing:O,placeholder:k,rightSlot:L,highlighted:F,...H},f)=>{const $=n.useRef(null),D=s=>["visibilityOn","visibilityOff"].includes(s)?m?"visibility-show":"visibility-hide":s==="clean"?"cancel":"",G=s=>["visibilityOn","visibilityOff"].includes(s)?m?"show text":"hide text":s==="clean"?"clear":"",[r,q]=n.useState(i??""),[T,C]=n.useState(r.length),[m,R]=n.useState(!!l&&a==="visibilityOn");n.useEffect(()=>{i!==void 0&&(q(i),C(i.length))},[i]),n.useEffect(()=>{R(!!l&&a==="visibilityOn")},[l,a]);const J=s=>{const N=s.target.value;q(N),C(N.length),p&&p(N)},K=()=>{a==="clean"&&(q(""),C(0),p&&p("")),["visibilityOn","visibilityOff"].includes(a)&&P()},M=()=>{z&&z(),K()},P=()=>{R(!m)},_=I?"error":B,Q=se(t.inputBar,_?t.withLeftIcon:"",a?t.withRightIcon:""),w=S&&typeof u=="number",U=D(a),W=G(a),X=()=>b||d?!1:a==="clean"?!!(r!=null&&r.length)&&l:l&&!!a,Y=j?e.jsx("span",{className:t.requiredText,children:"(obligatoire)"}):e.jsx("span",{className:t.requiredIconContainer,children:e.jsx(h,{name:"asterisk",size:8})}),Z=j?e.jsx("span",{className:t.requiredText,children:"(optionnel)"}):null,A=V?Y:Z;return e.jsxs("div",{className:t.container,"data-label-position":o,"data-error":I,style:{width:E},"data-compact-spacing":O,children:[g&&e.jsxs("div",{className:t.text,children:[e.jsxs("div",{className:t.labelContainer,children:[e.jsxs("label",{className:t.inputLabel,id:`inputLabel-${v}`,htmlFor:v,children:[" ",g," "]}),A]}),w&&o==="top"&&e.jsxs("p",{className:t.inputCounter,"data-testid":"input-counter",children:[" ",T,"/",u]})]}),e.jsxs("div",{className:t.inputContainer,children:[e.jsxs("div",{className:t.input,"data-label-position":o,"data-disabled":d,"data-read-only":b,children:[e.jsxs("div",{className:Q,children:[_&&e.jsx(h,{name:_,appearance:"outlined",className:t.leftIcon,"aria-hidden":"true","data-testid":`left-icon ${_}`}),e.jsx("input",{id:v,ref:s=>{$.current=s,typeof f=="function"?f(s):f&&(f.current=s)},type:m?"password":"text","data-error":I,"data-highlighted":F,className:t.inputField,maxLength:u,onChange:J,disabled:d,readOnly:b,value:r,placeholder:d?void 0:k,...H}),X()&&e.jsx(ee,{name:U,appearance:"outlined",variant:"neutral",size:"s",compactSpacing:!0,className:t.rightIcon,"aria-label":W,onClick:M,"data-testid":"right-icon"})]}),L&&e.jsx("div",{className:t.rightSlot,children:L})]}),x&&e.jsxs("div",{className:t.assistiveText,children:[y&&c==="error"&&e.jsx(h,{name:"error",appearance:"outlined",className:t.assistiveIconError,size:12}),y&&c==="success"&&e.jsx(h,{name:"check",appearance:"outlined",className:t.assistiveIconSucces,size:12}),c==="link"?e.jsx(te,{label:x}):e.jsxs("p",{className:t.assistiveLabel,"data-appearance":c,children:[" ",x," "]})]})]}),w&&o=="side"&&e.jsxs("p",{className:t.inputCounter,"data-testid":"input-counter",children:[" ",T,"/",u," "]})]})});qe.__docgenInfo={description:"",methods:[],displayName:"BaseTextInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},rightSlot:{required:!1,tsType:{name:"ReactNode"},description:""},inputStyle:{required:!1,tsType:{name:"CSSProperties"},description:""},highlighted:{required:!1,tsType:{name:"boolean"},description:""},labelPosition:{defaultValue:{value:'"top"',computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1},showRightIcon:{defaultValue:{value:"true",computed:!1},required:!1},rightIconAction:{defaultValue:{value:'"clean"',computed:!1},required:!1},showLabelRequirement:{defaultValue:{value:"false",computed:!1},required:!1},assistiveAppearance:{defaultValue:{value:'"description"',computed:!1},required:!1},showAssistiveIcon:{defaultValue:{value:"false",computed:!1},required:!1},assistiveTextLabel:{defaultValue:{value:'""',computed:!1},required:!1},error:{defaultValue:{value:"false",computed:!1},required:!1}},composes:["CoreTextInputProps","Omit"]};export{qe as B};
