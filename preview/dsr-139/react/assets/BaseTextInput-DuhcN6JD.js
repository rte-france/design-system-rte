import{j as e}from"./jsx-runtime-Cf8x2fCZ.js";import{r as i}from"./index-G8LIXM5I.js";import{I as _}from"./Icon-DjEid3Hw.js";import{I as P}from"./IconButton-CYFOPNzz.js";import{L as A}from"./Link-DbCKFFRz.js";import{c as ee}from"./index-DSdvzt-y.js";const te="_container_e7x7m_3",se="_inputContainer_e7x7m_12",ae="_input_e7x7m_12",ie="_inputBar_e7x7m_16",ne="_inputField_e7x7m_16",re="_text_e7x7m_23",le="_inputCounter_e7x7m_27",oe="_leftIcon_e7x7m_30",ue="_labelContainer_e7x7m_42",ce="_inputLabel_e7x7m_46",de="_requiredText_e7x7m_54",pe="_requiredIconContainer_e7x7m_67",me="_withLeftIcon_e7x7m_89",fe="_withRightIcon_e7x7m_92",xe="_rightIcon_e7x7m_100",_e="_assistiveText_e7x7m_154",ve="_assistiveIconError_e7x7m_160",he="_assistiveLabel_e7x7m_166",t={container:te,inputContainer:se,input:ae,inputBar:ie,inputField:ne,text:re,inputCounter:le,leftIcon:oe,labelContainer:ue,inputLabel:ce,requiredText:de,requiredIconContainer:pe,withLeftIcon:me,withRightIcon:fe,rightIcon:xe,assistiveText:_e,assistiveIconError:ve,assistiveLabel:he},Ie=i.forwardRef(({id:v,label:j,labelPosition:o="top",required:V=!1,showCounter:B,value:n,leftIcon:E,showRightIcon:r=!0,rightIconAction:a="clean",showLabelRequirement:g=!1,assistiveAppearance:u="description",showAssistiveIcon:y=!1,assistiveTextLabel:h="",error:I=!1,maxLength:c,disabled:d,readOnly:b,width:O,onChange:p,onRightIconClick:L,compactSpacing:S,placeholder:k,...F},m)=>{const z=i.useRef(null),H=s=>["visibilityOn","visibilityOff"].includes(s)?f?"visibility-show":"visibility-hide":s==="clean"?"cancel":"",$=s=>["visibilityOn","visibilityOff"].includes(s)?f?"show text":"hide text":s==="clean"?"clear":"",[l,C]=i.useState(n??""),[T,q]=i.useState(l.length),[f,w]=i.useState(!!r&&a==="visibilityOn");i.useEffect(()=>{n!==void 0&&(C(n),q(n.length))},[n]),i.useEffect(()=>{w(!!r&&a==="visibilityOn")},[r,a]);const D=s=>{const N=s.target.value;C(N),q(N.length),p&&p(N)},G=()=>{a==="clean"&&(C(""),q(0),p&&p("")),["visibilityOn","visibilityOff"].includes(a)&&K()},J=()=>{L&&L(),G()},K=()=>{w(!f)},x=I?"error":E,M=ee(t.inputBar,x?t.withLeftIcon:"",a?t.withRightIcon:""),R=B&&typeof c=="number",Q=H(a),U=$(a),W=()=>b||d?!1:a==="clean"?!!(l!=null&&l.length)&&r:r&&!!a,X=g?e.jsx("span",{className:t.requiredText,children:"(obligatoire)"}):e.jsx("span",{className:t.requiredIconContainer,children:e.jsx(_,{name:"asterisk",size:8})}),Y=g?e.jsx("span",{className:t.requiredText,children:"(optionnel)"}):null,Z=V?X:Y;return e.jsxs("div",{className:t.container,"data-label-position":o,"data-error":I,style:{width:O},"data-compact-spacing":S,children:[j&&e.jsxs("div",{className:t.text,children:[e.jsxs("div",{className:t.labelContainer,children:[e.jsxs("label",{className:t.inputLabel,id:`inputLabel-${v}`,htmlFor:v,children:[" ",j," "]}),Z]}),R&&o==="top"&&e.jsxs("p",{className:t.inputCounter,"data-testid":"input-counter",children:[" ",T,"/",c]})]}),e.jsxs("div",{className:t.inputContainer,children:[e.jsx("div",{className:t.input,"data-label-position":o,"data-disabled":d,"data-read-only":b,children:e.jsxs("div",{className:M,children:[x&&e.jsx(_,{name:x,appearance:"outlined",className:t.leftIcon,"aria-hidden":"true","data-testid":`left-icon ${x}`}),e.jsx("input",{id:v,ref:s=>{z.current=s,typeof m=="function"?m(s):m&&(m.current=s)},type:f?"password":"text","data-error":I,className:t.inputField,maxLength:c,onChange:D,disabled:d,readOnly:b,value:l,placeholder:d?void 0:k,...F}),W()&&e.jsx(P,{name:Q,appearance:"outlined",variant:"neutral",size:"s",compactSpacing:!0,className:t.rightIcon,"aria-label":U,onClick:J,"data-testid":"right-icon"})]})}),h&&e.jsxs("div",{className:t.assistiveText,children:[y&&u==="error"&&e.jsx(_,{name:"error",appearance:"outlined",className:t.assistiveIconError,size:12}),y&&u==="success"&&e.jsx(_,{name:"check",appearance:"outlined",className:t.assistiveIconSucces,size:12}),u==="link"?e.jsx(A,{label:h}):e.jsxs("p",{className:t.assistiveLabel,"data-appearance":u,children:[" ",h," "]})]})]}),R&&o=="side"&&e.jsxs("p",{className:t.inputCounter,"data-testid":"input-counter",children:[" ",T,"/",c," "]})]})});Ie.__docgenInfo={description:"",methods:[],displayName:"BaseTextInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},labelPosition:{defaultValue:{value:'"top"',computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1},showRightIcon:{defaultValue:{value:"true",computed:!1},required:!1},rightIconAction:{defaultValue:{value:'"clean"',computed:!1},required:!1},showLabelRequirement:{defaultValue:{value:"false",computed:!1},required:!1},assistiveAppearance:{defaultValue:{value:'"description"',computed:!1},required:!1},showAssistiveIcon:{defaultValue:{value:"false",computed:!1},required:!1},assistiveTextLabel:{defaultValue:{value:'""',computed:!1},required:!1},error:{defaultValue:{value:"false",computed:!1},required:!1}},composes:["CoreTextInputProps","Omit"]};export{Ie as B};
