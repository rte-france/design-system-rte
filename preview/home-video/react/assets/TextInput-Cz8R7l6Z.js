import{j as e}from"./jsx-runtime-Cf8x2fCZ.js";import{r as a}from"./index-G8LIXM5I.js";import{I as _}from"./Icon-DjEid3Hw.js";import{I as W}from"./IconButton-DU9lNzF3.js";import{L as X}from"./Link-DbCKFFRz.js";import{c as Y}from"./index-DSdvzt-y.js";const Z="_container_1n2p5_3",P="_text_1n2p5_16",A="_inputCounter_1n2p5_20",ee="_inputContainer_1n2p5_23",te="_input_1n2p5_20",se="_inputBar_1n2p5_23",ne="_leftIcon_1n2p5_23",ae="_labelContainer_1n2p5_35",ie="_inputLabel_1n2p5_39",re="_requiredText_1n2p5_47",le="_requiredIconContainer_1n2p5_60",oe="_withLeftIcon_1n2p5_82",ue="_inputField_1n2p5_82",ce="_withRightIcon_1n2p5_85",pe="_rightIcon_1n2p5_93",de="_assistiveText_1n2p5_146",fe="_assistiveIconError_1n2p5_152",me="_assistiveLabel_1n2p5_158",t={container:Z,text:P,inputCounter:A,inputContainer:ee,input:te,inputBar:se,leftIcon:ne,labelContainer:ae,inputLabel:ie,requiredText:re,requiredIconContainer:le,withLeftIcon:oe,inputField:ue,withRightIcon:ce,rightIcon:pe,assistiveText:de,assistiveIconError:fe,assistiveLabel:me},_e=a.forwardRef(({id:v,label:q,labelPosition:o="top",required:R=!1,showCounter:E,value:i,leftIcon:O,showRightIcon:r=!0,rightIconAction:n="clean",showLabelRequirement:y=!1,assistiveAppearance:u="description",showAssistiveIcon:g=!1,assistiveTextLabel:x="",error:h=!1,maxLength:c,disabled:I,readOnly:b,width:B,onChange:p,onRightIconClick:L,...k},d)=>{const F=a.useRef(null),S=s=>["visibilityOn","visibilityOff"].includes(s)?f?"visibility-show":"visibility-hide":s==="clean"?"close":"",z=s=>["visibilityOn","visibilityOff"].includes(s)?f?"show text":"hide text":s==="clean"?"clear":"",[l,C]=a.useState(i??""),[w,N]=a.useState(l.length),[f,T]=a.useState(!!r&&n==="visibilityOn");a.useEffect(()=>{i!==void 0&&(C(i),N(i.length))},[i]),a.useEffect(()=>{T(!!r&&n==="visibilityOn")},[r,n]);const H=s=>{const j=s.target.value;C(j),N(j.length),p&&p(j)},$=()=>{n==="clean"&&(C(""),N(0),p&&p("")),["visibilityOn","visibilityOff"].includes(n)&&G()},D=()=>{L&&L(),$()},G=()=>{T(!f)},m=h?"error":O,J=Y(t.inputBar,m?t.withLeftIcon:"",n?t.withRightIcon:""),V=E&&typeof c=="number",K=S(n),M=z(n),Q=()=>b||I?!1:n==="clean"?!!(l!=null&&l.length)&&r:r&&!!n,U=R?y?e.jsx("span",{className:t.requiredText,children:"(obligatoire)"}):e.jsx("span",{className:t.requiredIconContainer,children:e.jsx(_,{name:"asterisk",size:8})}):y?e.jsx("span",{className:t.requiredText,children:"(optionnel)"}):null;return e.jsxs("div",{className:t.container,"data-label-position":o,"data-error":h,style:{width:B},children:[q&&e.jsxs("div",{className:t.text,children:[e.jsxs("div",{className:t.labelContainer,children:[e.jsxs("label",{className:t.inputLabel,id:`inputLabel-${v}`,htmlFor:v,children:[" ",q," "]}),U]}),V&&o==="top"&&e.jsxs("p",{className:t.inputCounter,"data-testid":"input-counter",children:[" ",w,"/",c]})]}),e.jsxs("div",{className:t.inputContainer,children:[e.jsx("div",{className:t.input,"data-label-position":o,"data-disabled":I,"data-read-only":b,children:e.jsxs("div",{className:J,children:[m&&e.jsx(_,{name:m,appearance:"outlined",className:t.leftIcon,"aria-hidden":"true","data-testid":`left-icon ${m}`}),e.jsx("input",{id:v,ref:s=>{F.current=s,typeof d=="function"?d(s):d&&(d.current=s)},type:f?"password":"text","data-error":h,className:t.inputField,maxLength:c,onChange:H,disabled:I,readOnly:b,value:l,...k}),Q()&&e.jsx(W,{name:K,appearance:"outlined",variant:"transparent",className:t.rightIcon,"aria-label":M,onClick:D,"data-testid":"right-icon"})]})}),x&&e.jsxs("div",{className:t.assistiveText,children:[g&&u==="error"&&e.jsx(_,{name:"error",appearance:"outlined",className:t.assistiveIconError,size:12}),g&&u==="success"&&e.jsx(_,{name:"check",appearance:"outlined",className:t.assistiveIconSucces,size:12}),u==="link"?e.jsx(X,{label:x}):e.jsxs("p",{className:t.assistiveLabel,"data-appearance":u,children:[" ",x," "]})]})]}),V&&o=="side"&&e.jsxs("p",{className:t.inputCounter,"data-testid":"input-counter",children:[" ",w,"/",c," "]})]})});_e.__docgenInfo={description:"",methods:[],displayName:"TextInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},labelPosition:{defaultValue:{value:'"top"',computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1},showRightIcon:{defaultValue:{value:"true",computed:!1},required:!1},rightIconAction:{defaultValue:{value:'"clean"',computed:!1},required:!1},showLabelRequirement:{defaultValue:{value:"false",computed:!1},required:!1},assistiveAppearance:{defaultValue:{value:'"description"',computed:!1},required:!1},showAssistiveIcon:{defaultValue:{value:"false",computed:!1},required:!1},assistiveTextLabel:{defaultValue:{value:'""',computed:!1},required:!1},error:{defaultValue:{value:"false",computed:!1},required:!1}},composes:["CoreTextInputProps","Omit"]};export{_e as T};
