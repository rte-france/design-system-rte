import{j as e}from"./jsx-runtime-Cf8x2fCZ.js";import{r as i}from"./index-G8LIXM5I.js";import{I as x}from"./Icon-DjEid3Hw.js";import{I as ee}from"./IconButton-Cd1eiha_.js";import{L as te}from"./Link-uakZYDkP.js";import{c as se}from"./index-DSdvzt-y.js";const ae="_container_kxowh_1",ie="_inputContainer_kxowh_10",ne="_input_kxowh_10",re="_inputBar_kxowh_14",le="_inputField_kxowh_14",oe="_text_kxowh_21",ue="_inputCounter_kxowh_25",ce="_leftIcon_kxowh_28",de="_labelContainer_kxowh_40",pe="_inputLabel_kxowh_44",fe="_requiredText_kxowh_52",me="_requiredIconContainer_kxowh_65",he="_withLeftIcon_kxowh_91",xe="_withRightIcon_kxowh_94",_e="_rightIcon_kxowh_102",ve="_assistiveText_kxowh_156",Ie="_assistiveIconError_kxowh_162",be="_assistiveLabel_kxowh_168",t={container:ae,inputContainer:ie,input:ne,inputBar:re,inputField:le,text:oe,inputCounter:ue,leftIcon:ce,labelContainer:de,inputLabel:pe,requiredText:fe,requiredIconContainer:me,withLeftIcon:he,withRightIcon:xe,rightIcon:_e,assistiveText:ve,assistiveIconError:Ie,assistiveLabel:be},we=i.forwardRef(({id:_,label:N,labelPosition:o="top",required:V=!1,showCounter:S,value:n,leftIcon:B,showRightIcon:r=!0,rightIconAction:a="clean",showLabelRequirement:g=!1,assistiveAppearance:u="description",showAssistiveIcon:j=!1,assistiveTextLabel:v="",error:I=!1,maxLength:c,disabled:d,readOnly:b,width:E,onChange:p,onRightIconClick:k,compactSpacing:O,placeholder:F,rightSlot:y,highlighted:z,...H},f)=>{const $=i.useRef(null),D=s=>["visibilityOn","visibilityOff"].includes(s)?m?"visibility-show":"visibility-hide":s==="clean"?"cancel":"",G=s=>["visibilityOn","visibilityOff"].includes(s)?m?"show text":"hide text":s==="clean"?"clear":"",[l,w]=i.useState(n??""),[L,q]=i.useState(l.length),[m,T]=i.useState(!!r&&a==="visibilityOn");i.useEffect(()=>{n!==void 0&&(w(n),q(n.length))},[n]),i.useEffect(()=>{T(!!r&&a==="visibilityOn")},[r,a]);const J=s=>{const C=s.target.value;w(C),q(C.length),p&&p(C)},K=()=>{a==="clean"&&(w(""),q(0),p&&p("")),["visibilityOn","visibilityOff"].includes(a)&&P()},M=()=>{k&&k(),K()},P=()=>{T(!m)},h=I?"error":B,Q=se(t.inputBar,h?t.withLeftIcon:"",a?t.withRightIcon:""),R=S&&typeof c=="number",U=D(a),W=G(a),X=()=>b||d?!1:a==="clean"?!!(l!=null&&l.length)&&r:r&&!!a,Y=g?e.jsx("span",{className:t.requiredText,children:"(obligatoire)"}):e.jsx("span",{className:t.requiredIconContainer,children:e.jsx(x,{name:"asterisk",size:8})}),Z=g?e.jsx("span",{className:t.requiredText,children:"(optionnel)"}):null,A=V?Y:Z;return e.jsxs("div",{className:t.container,"data-label-position":o,"data-error":I,style:{width:E},"data-compact-spacing":O,children:[N&&e.jsxs("div",{className:t.text,children:[e.jsxs("div",{className:t.labelContainer,children:[e.jsxs("label",{className:t.inputLabel,id:`inputLabel-${_}`,htmlFor:_,children:[" ",N," "]}),A]}),R&&o==="top"&&e.jsxs("p",{className:t.inputCounter,"data-testid":"input-counter",children:[" ",L,"/",c]})]}),e.jsxs("div",{className:t.inputContainer,children:[e.jsxs("div",{className:t.input,"data-label-position":o,"data-disabled":d,"data-read-only":b,children:[e.jsxs("div",{className:Q,children:[h&&e.jsx(x,{name:h,appearance:"outlined",className:t.leftIcon,"aria-hidden":"true","data-testid":`left-icon ${h}`}),e.jsx("input",{id:_,ref:s=>{$.current=s,typeof f=="function"?f(s):f&&(f.current=s)},type:m?"password":"text","data-error":I,"data-highlighted":z,className:t.inputField,maxLength:c,onChange:J,disabled:d,readOnly:b,value:d?"":l,placeholder:F,...H}),X()&&e.jsx(ee,{name:U,appearance:"outlined",variant:"neutral",size:"s",compactSpacing:!0,className:t.rightIcon,"aria-label":W,onClick:M,"data-testid":"right-icon"})]}),y&&e.jsx("div",{className:t.rightSlot,children:y})]}),v&&e.jsxs("div",{className:t.assistiveText,children:[j&&u==="error"&&e.jsx(x,{name:"error",appearance:"outlined",className:t.assistiveIconError,size:12}),j&&u==="success"&&e.jsx(x,{name:"check",appearance:"outlined",className:t.assistiveIconSucces,size:12}),u==="link"?e.jsx(te,{label:v}):e.jsxs("p",{className:t.assistiveLabel,"data-appearance":u,children:[" ",v," "]})]})]}),R&&o=="side"&&e.jsxs("p",{className:t.inputCounter,"data-testid":"input-counter",children:[" ",L,"/",c," "]})]})});we.__docgenInfo={description:"",methods:[],displayName:"BaseTextInput",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},rightSlot:{required:!1,tsType:{name:"ReactNode"},description:""},inputStyle:{required:!1,tsType:{name:"CSSProperties"},description:""},highlighted:{required:!1,tsType:{name:"boolean"},description:""},labelPosition:{defaultValue:{value:'"top"',computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1},showRightIcon:{defaultValue:{value:"true",computed:!1},required:!1},rightIconAction:{defaultValue:{value:'"clean"',computed:!1},required:!1},showLabelRequirement:{defaultValue:{value:"false",computed:!1},required:!1},assistiveAppearance:{defaultValue:{value:'"description"',computed:!1},required:!1},showAssistiveIcon:{defaultValue:{value:"false",computed:!1},required:!1},assistiveTextLabel:{defaultValue:{value:'""',computed:!1},required:!1},error:{defaultValue:{value:"false",computed:!1},required:!1}},composes:["CoreTextInputProps","Omit"]};export{we as B};
