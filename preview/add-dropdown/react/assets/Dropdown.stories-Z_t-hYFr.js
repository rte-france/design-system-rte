import{j as e}from"./jsx-runtime-Cf8x2fCZ.js";import{u as Y,b as M,c as N,a as $,O as Z}from"./Overlay-BF4gWZr2.js";import{r as s}from"./index-G8LIXM5I.js";import{D as ee}from"./Divider-B0TD5a92.js";import{I as D}from"./Icon-DjEid3Hw.js";import{c as te}from"./index-DSdvzt-y.js";import"./index-yBjzXJbu.js";import"./index-DoK7PxrN.js";import"./_commonjsHelpers-CqkleIqs.js";import"./index-fNjTmf9T.js";const oe="_trigger_3rnfs_3",ne="_dropdown_3rnfs_14",u={trigger:oe,dropdown:ne,"dropdown-items":"_dropdown-items_3rnfs_39","dropdown-item":"_dropdown-item_3rnfs_39","dropdown-divider":"_dropdown-divider_3rnfs_81"};let I={};const h={};class b{static generateId(){return`dropdown-${Math.random().toString(36).substr(2,9)}`}static isOpen(t){return I[t]||!1}static open(t){I[t]=!0,this.notifyListeners(t)}static close(t){delete I[t],this.notifyListeners(t)}static closeAll(){I={},Object.values(h).flat().forEach(t=>t())}static getOpenedDropdowns(){return Object.keys(I)}static subscribe(t,r){return h[t]||(h[t]=[]),h[t].push(r),()=>{h[t]=h[t].filter(d=>d!==r)}}static notifyListeners(t){var r;(r=h[t])==null||r.forEach(d=>d())}}const U=n=>{const t=s.useRef(n||b.generateId()),[r,d]=s.useState(!1);s.useEffect(()=>b.subscribe(t.current,()=>{d(b.isOpen(t.current))}),[]);const w=()=>{b.open(t.current)},l=()=>{b.close(t.current)},i=()=>{r?l():w()};return{dropdownId:t.current,isOpen:r,open:w,close:l,toggle:i}};function se(n){return"category"in n&&"values"in n}function q(n){return"label"in n}const O=s.forwardRef(({options:n,trigger:t,className:r,style:d,dropdownId:w,hasParent:l,disabled:i,position:m="bottom",...C},p)=>{const{dropdownId:v,isOpen:y,open:x}=U(w),[W,S]=s.useState(m),E=s.useRef(null),X=s.useRef(null),[f,z]=s.useState(null),[g,H]=s.useState(null),[A,k]=s.useState({top:500,left:500}),{shouldRender:B,isAnimating:G}=Y(y,150),J=s.useCallback(o=>{X.current=o,z(o),typeof p=="function"?p(o):p&&(p.current=o)},[p]),K=s.useCallback(o=>{E.current=o,H(o)},[]);return s.useEffect(()=>{if(!y)return;const o=a=>{var R;const c=a.target,j=document.querySelectorAll("[data-dropdown-id]");Array.from(j).some(Q=>Q.contains(c))||((R=E.current)==null?void 0:R.contains(c))||b.closeAll()};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[y]),s.useEffect(()=>{if(y&&!(!g||!f))if(l){const o=M(g,f,"right",0,l),a=N(g,f,o),c=$(o,g,f,0,a);S(o),k(c)}else{const o=m==="auto"?M(g,f,"bottom"):m,a=N(g,f,o),c=$(o,g,f,0,a);S(o),k(c)}},[y,f,g,l]),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:K,onClick:i?void 0:x,onMouseOver:i||!l?void 0:x,className:u.trigger,"data-disabled":i,children:t}),B&&e.jsx(Z,{children:e.jsx("div",{className:te(u.dropdown,r),"data-dropdown-id":v,"data-position":W,"data-open":G||void 0,...C,style:{...d,top:A.top,left:A.left},ref:J,children:e.jsx("ul",{className:u["dropdown-items"],role:"menu",children:n.map((o,a)=>se(o)?e.jsxs(s.Fragment,{children:[o.values.map((c,j)=>q(c)&&e.jsx("li",{children:e.jsx(_,{option:c,parentId:v})},`${o.category}-${c.label}-${j}`)),e.jsx("li",{className:u["dropdown-divider"],role:"separator",children:e.jsx(ee,{})},`divider-${o.category}-${a}`)]},`category-${o.category}-${a}`):q(o)?e.jsx("li",{children:e.jsx(_,{option:o,parentId:v},o.label+a)},`simple-${o.label}-${a}`):null)})})})]})}),_=({option:n,parentId:t})=>{const r=`${t}-${n.label.replace(/\s+/g,"")}`,{isOpen:d}=U(r),w=()=>{b.getOpenedDropdowns().filter(x=>x.startsWith(t)&&x!==t).forEach(x=>b.close(x))},{label:l,leftIcon:i,subOptions:m,trailingText:C,disabled:p}=n;return m&&m.length>0?e.jsx(O,{hasParent:!0,dropdownId:r,disabled:p,trigger:e.jsx(e.Fragment,{children:e.jsxs("div",{className:u["dropdown-item"],"data-active":d,"data-disabled":p,role:"menuitem",onMouseOver:w,children:[i&&e.jsx(D,{name:i,className:u["dropdown-item-icon"]}),e.jsx("span",{style:{flex:"2"},children:l}),e.jsx(D,{name:"arrow-chevron-right",className:u["dropdown-item-icon"]})]})}),options:m||[]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:u["dropdown-item"],"data-disabled":p,role:"menuitem",onMouseOver:w,children:[i&&e.jsx(D,{name:i,className:u["dropdown-item-icon"]}),e.jsx("span",{style:{flex:"2"},children:l}),C&&e.jsx("div",{children:C})]})})};O.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{dropdownId:{required:!0,tsType:{name:"string"},description:""},trigger:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"union",raw:"DropdownItemOption | DropdownItemOptionCategorized",elements:[{name:"DropdownItemOption"},{name:"DropdownItemOptionCategorized"}]}],raw:"DropdownOptionItem[]"},description:""},hasParent:{required:!1,tsType:{name:"boolean"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},position:{required:!1,tsType:{name:"union",raw:'"top" | "bottom" | "left" | "right" | "auto"',elements:[{name:"literal",value:'"top"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"left"'},{name:"literal",value:'"right"'},{name:"literal",value:'"auto"'}]},description:"",defaultValue:{value:'"bottom"',computed:!1}}}};_.__docgenInfo={description:"",methods:[],displayName:"DropdownItem",props:{option:{required:!0,tsType:{name:"DropdownItemOption"},description:""},parentId:{required:!0,tsType:{name:"string"},description:""}}};const re=[{label:"Messages",leftIcon:"mail"},{label:"Settings",leftIcon:"settings",subOptions:[{label:"Edit",leftIcon:"edit",subOptions:[{label:"Cut",leftIcon:"cut",trailingText:"⌘X"},{label:"Copy",leftIcon:"copy",trailingText:"⌘C"},{label:"Paste",leftIcon:"paste",trailingText:"⌘V"}]},{label:"Duplicate",leftIcon:"copy"},{label:"Archive",leftIcon:"archive"},{label:"Delete",leftIcon:"delete"}]},{label:"Help",leftIcon:"help"},{label:"More information",leftIcon:"info"},{label:"First Option"},{label:"Second Option",subOptions:[{label:"Sub Option 1"},{label:"Sub Option 2"}],disabled:!0},{label:"Third Option"},{label:"Username",leftIcon:"user",trailingText:"⌘U"}],P=[{category:"Category 1",values:[{label:"Messages",leftIcon:"mail"}]},{category:"Category 2",values:[{label:"Actions",leftIcon:"settings",subOptions:[{label:"Edit",leftIcon:"edit",subOptions:[{label:"Cut",leftIcon:"cut",trailingText:"⌘X"},{label:"Copy",leftIcon:"copy",trailingText:"⌘C",subOptions:[{label:"Cut",leftIcon:"cut",trailingText:"⌘X"},{label:"Copy",leftIcon:"copy",trailingText:"⌘C"},{label:"Paste",leftIcon:"paste",trailingText:"⌘V",subOptions:[{label:"Cut",leftIcon:"cut",trailingText:"⌘X",subOptions:[{label:"Cut",leftIcon:"cut",trailingText:"⌘X"},{label:"Copy",leftIcon:"copy",trailingText:"⌘C"},{label:"Paste",leftIcon:"paste",trailingText:"⌘V"}]},{label:"Copy",leftIcon:"copy",trailingText:"⌘C"},{label:"Paste",leftIcon:"paste",trailingText:"⌘V"}]}]},{label:"Paste",leftIcon:"paste",trailingText:"⌘V"}]},{label:"Archive",leftIcon:"archive"},{label:"Delete",leftIcon:"delete"}]},{label:"Help",leftIcon:"help"},{label:"More information",leftIcon:"info"}]},{category:"Category 3",values:[{label:"First Option a little bit longer than usual"},{label:"Second Option",subOptions:[{label:"Sub Option 1"},{label:"Sub Option 2"}],disabled:!0},{label:"Third Option"}]},{label:"Username",leftIcon:"user",trailingText:"⌘U"}],we={title:"Dropdown",component:O,args:{options:re}},T={args:{trigger:e.jsx("button",{style:{color:"black"},children:"Click Me!"})},render:n=>e.jsxs("div",{style:{border:"1px solid black",position:"relative",width:"800px",height:"200px",display:"flex",justifyContent:"space-between",gap:"500px"},children:[e.jsx(O,{...n,options:P,style:{width:"250px"}}),e.jsx(O,{...n,options:P,style:{width:"250px"}})]})};var F,L,V;T.parameters={...T.parameters,docs:{...(F=T.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {
    trigger: <button style={{
      color: "black"
    }}>Click Me!</button>
  },
  render: args => <div style={{
    border: "1px solid black",
    position: "relative",
    width: "800px",
    height: "200px",
    display: "flex",
    // alignItems: "end",
    justifyContent: "space-between",
    gap: "500px"
  }}>
      {/* <Dropdown {...args} style={{ width: "1504px" }} /> */}
      <Dropdown {...args} options={optionsWithCategories} style={{
      width: "250px"
    }} />
      <Dropdown {...args} options={optionsWithCategories} style={{
      width: "250px"
    }} />
      {/* <Tooltip position="top" label="This is a tooltip">
        <span
          style={{
            textDecoration: "underline",
            textDecorationColor: "#BF4C00",
            textDecorationThickness: "2px",
            textUnderlineOffset: "4px",
            color: "#BF4C00",
            fontWeight: "bold",
          }}
        >
          Hover Me!
        </span>
       </Tooltip> */}
    </div>
}`,...(V=(L=T.parameters)==null?void 0:L.docs)==null?void 0:V.source}}};const xe=["Default"];export{T as Default,xe as __namedExportsOrder,we as default};
